import{d as q,r as s,G as H,b as J,au as S,Q as K,j as M,ae as W,o as p,c as d,e,n as X,a as l,f as o,w as U,F as V,k as L,V as T,t as Y,i as Z,bO as $,br as aa,cb as ta,__tla as la}from"./index-456ccb5c.js";import{E as ea,__tla as ra}from"./el-image-af14a6b7.js";import{__tla as sa}from"./el-image-viewer-5ea9d668.js";import{d as oa,g as ua,a as ca,__tla as ia}from"./index-4a20f8c1.js";import na,{__tla as _a}from"./PhotoDialog-e916cb72.js";import{u as pa,__tla as da}from"./useMessage-59021f66.js";import{E as ma,__tla as va}from"./index-99e80b88.js";import{_ as ga}from"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as ya}from"./useSts-1199f4d2.js";import{__tla as fa}from"./aliyun-oss-sdk-a3e481f3.js";import"./_commonjs-dynamic-modules-3e972b61.js";import"./tool-2ec5870e.js";let F,ha=Promise.all([(()=>{try{return la}catch{}})(),(()=>{try{return ra}catch{}})(),(()=>{try{return sa}catch{}})(),(()=>{try{return ia}catch{}})(),(()=>{try{return _a}catch{}})(),(()=>{try{return da}catch{}})(),(()=>{try{return va}catch{}})(),(()=>{try{return ya}catch{}})(),(()=>{try{return fa}catch{}})()]).then(async()=>{let g,y,f,h,b,I,k;g={class:"album"},y={class:"album-layout-scrollbar"},f=["onClick"],h={class:"album-layout-card-image"},b=["onClick"],I={class:"album-layout-card-title"},k={class:"album-footer"},F=ga(q({__name:"AlbumInfo",props:{user:{},photoRef:{type:Boolean},updateFlag:{type:Boolean}},setup(N){const R=pa(),x=N,i=s(!1),w=s(0),A=H().params.id,z=s(1),C=s(""),m=s(!1),u=J({pageNo:1,pageSize:7,userId:A});S(()=>x.updateFlag,()=>r()),S(m,()=>{r()});const n=s([]),B=K(()=>({"album-layout":!0,"space-between":n.value.length>4})),r=async()=>{const c=await ua(u);n.value=c.list,n.value.map(async a=>{if(a.coverPhotoId){const v=await ca(a.coverPhotoId);return a.coverPhotoIdUrl=v.url}}),w.value=c.total};return M(()=>r()),(c,a)=>{const v=ea,E=W("Delete"),j=aa,D=ta,G=ma;return p(),d(V,null,[e("div",g,[e("div",{class:X(l(B))},[o(D,null,{default:U(()=>[e("div",y,[(p(!0),d(V,null,L(l(n),(t,O)=>(p(),d("div",{class:"album-layout-card",key:O,onClick:Q=>{return c.photoRef?null:(_=t.id,P=t.title,z.value=_,C.value=P,void(i.value=!0));var _,P}},[e("div",h,[o(v,{class:"h-60 w-40 rounded-lg",fit:"cover",src:t.coverPhotoIdUrl},null,8,["src"]),c.photoRef?(p(),d("div",{key:0,class:"album-layout-card-image-delete",onClick:Q=>(async _=>{$.confirm("\u786E\u8BA4\u5220\u9664\u5417?","\u8B66\u544A").then(async()=>{await oa(_),R.success("\u5220\u9664\u6210\u529F"),await r()})})(t.id)},[o(j,null,{default:U(()=>[o(E,{class:"c-#ba2636"})]),_:1})],8,b)):T("",!0)]),e("div",I,[e("span",null,Y(t.title),1)])],8,f))),128))])]),_:1})],2),e("div",k,[o(G,{onSizeChange:r,onCurrentChange:r,"current-page":l(u).pageNo,"onUpdate:currentPage":a[0]||(a[0]=t=>l(u).pageNo=t),"page-size":l(u).pageSize,"onUpdate:pageSize":a[1]||(a[1]=t=>l(u).pageSize=t),layout:"total, prev, pager, next",total:l(w)},null,8,["current-page","page-size","total"])])]),o(na,{dialogVisible:l(i),"onUpdate:dialogVisible":a[2]||(a[2]=t=>Z(i)?i.value=t:null),albumId:l(z),title:l(C),onSuccess:a[3]||(a[3]=t=>m.value=!l(m))},null,8,["dialogVisible","albumId","title"])],64)}}}),[["__scopeId","data-v-019d291d"]])});export{ha as __tla,F as default};
