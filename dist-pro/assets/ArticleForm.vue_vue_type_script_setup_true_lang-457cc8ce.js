import{al as g,d as le,g as te,r as i,b as re,j as oe,o as n,c as v,f as a,w as t,a as l,m,p as ue,l as p,F as y,k as U,t as I,V as de,i as se,M as ne,x as ie,a3 as me,q as _e,v as ce,bA as pe,ab as fe,ac as ge,af as ve,z as ye,a5 as be,A as Ve,D as he,__tla as Ue}from"./index-e69fb82c.js";import{_ as Ie,__tla as we}from"./Dialog.vue_vue_type_style_index_0_lang-dccb0a2a.js";import{_ as ke,__tla as qe}from"./style.css_vue_type_style_index_0_src_true_lang-272dbdef.js";import{_ as Ae,__tla as Be}from"./UploadImg-43586e81.js";import{a as xe,D as B,g as R,__tla as Ne}from"./dict-9c294b1e.js";import{g as Se,__tla as Fe}from"./index-63c8fe7a.js";import{h as He,__tla as Oe}from"./spu-51481d4a.js";import{_ as Re,__tla as Ce}from"./SpuSelect.vue_vue_type_script_setup_true_lang-446dea4b.js";import{__tla as Te}from"./el-image-f8ab6565.js";import{__tla as De}from"./el-image-viewer-3b74f14e.js";import{__tla as Ee}from"./ImageViewer.vue_vue_type_script_setup_true_lang-bfbcf290.js";import{__tla as Ge}from"./SkuList.vue_vue_type_script_setup_true_lang-18dcbba5.js";import{u as Le,__tla as Me}from"./useMessage-ac7e9ad3.js";let C,T,D,ze=Promise.all([(()=>{try{return Ue}catch{}})(),(()=>{try{return we}catch{}})(),(()=>{try{return qe}catch{}})(),(()=>{try{return Be}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return Fe}catch{}})(),(()=>{try{return Oe}catch{}})(),(()=>{try{return Ce}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return De}catch{}})(),(()=>{try{return Ee}catch{}})(),(()=>{try{return Ge}catch{}})(),(()=>{try{return Me}catch{}})()]).then(async()=>{D=async b=>await g.get({url:"/promotion/article/page",params:b}),T=async b=>await g.delete({url:"/promotion/article/delete?id="+b}),C=le({name:"PromotionArticleForm",__name:"ArticleForm",emits:["success"],setup(b,{expose:E,emit:G}){const{t:w}=te(),x=Le(),_=i(!1),N=i(""),c=i(!1),S=i(""),o=i({id:void 0,categoryId:void 0,title:void 0,author:void 0,picUrl:void 0,introduction:void 0,sort:0,status:0,spuId:0,recommendHot:!1,recommendBanner:!1,content:void 0}),L=re({categoryId:[{required:!0,message:"\u5206\u7C7Bid\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],title:[{required:!0,message:"\u6587\u7AE0\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u6587\u7AE0\u5C01\u9762\u56FE\u7247\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],spuId:[{required:!0,message:"\u5546\u54C1\u5173\u8054id\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],recommendHot:[{required:!0,message:"\u662F\u5426\u70ED\u95E8(\u5C0F\u7A0B\u5E8F)\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],recommendBanner:[{required:!0,message:"\u662F\u5426\u8F6E\u64AD\u56FE(\u5C0F\u7A0B\u5E8F)\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u6587\u7AE0\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),V=i(),F=i(),M=u=>{o.value.spuId=u};E({open:async(u,r)=>{if(_.value=!0,N.value=w("action."+u),S.value=u,X(),r){c.value=!0;try{o.value=await(async f=>await g.get({url:"/promotion/article/get?id="+f}))(r)}finally{c.value=!1}}}});const z=G,P=async()=>{if(V&&await V.value.validate()){c.value=!0;try{const u=o.value;S.value==="create"?(await(async r=>await g.post({url:"/promotion/article/create",data:r}))(u),x.success(w("common.createSuccess"))):(await(async r=>await g.put({url:"/promotion/article/update",data:r}))(u),x.success(w("common.updateSuccess"))),_.value=!1,z("success")}finally{c.value=!1}}},X=()=>{var u;o.value={id:void 0,categoryId:void 0,title:void 0,author:void 0,picUrl:void 0,introduction:void 0,sort:0,status:0,spuId:0,recommendHot:!1,recommendBanner:!1,content:void 0},(u=V.value)==null||u.resetFields()},H=i([]),O=i([]);return oe(async()=>{H.value=await Se(),O.value=await He()}),(u,r)=>{const f=ne,d=ie,s=me,j=_e,J=ce,K=Ae,Q=pe,k=fe,q=ge,W=ve,A=ye,Y=ke,Z=be,$=Ve,ee=Ie,ae=he;return n(),v(y,null,[a(ee,{modelValue:l(_),"onUpdate:modelValue":r[12]||(r[12]=e=>se(_)?_.value=e:null),title:l(N),width:"70%"},{footer:t(()=>[a(A,{disabled:l(c),type:"primary",onClick:P},{default:t(()=>[m("\u786E \u5B9A")]),_:1},8,["disabled"]),a(A,{onClick:r[11]||(r[11]=e=>_.value=!1)},{default:t(()=>[m("\u53D6 \u6D88")]),_:1})]),default:t(()=>[ue((n(),p($,{ref_key:"formRef",ref:V,model:l(o),rules:l(L),"label-width":"110px"},{default:t(()=>[a(Z,null,{default:t(()=>[a(s,{span:12},{default:t(()=>[a(d,{label:"\u6587\u7AE0\u6807\u9898",prop:"title"},{default:t(()=>[a(f,{modelValue:l(o).title,"onUpdate:modelValue":r[0]||(r[0]=e=>l(o).title=e),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{span:12},{default:t(()=>[a(d,{label:"\u6587\u7AE0\u5206\u7C7B",prop:"categoryId"},{default:t(()=>[a(J,{modelValue:l(o).categoryId,"onUpdate:modelValue":r[1]||(r[1]=e=>l(o).categoryId=e),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(n(!0),v(y,null,U(l(H),e=>(n(),p(j,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(s,{span:12},{default:t(()=>[a(d,{label:"\u6587\u7AE0\u4F5C\u8005",prop:"author"},{default:t(()=>[a(f,{modelValue:l(o).author,"onUpdate:modelValue":r[2]||(r[2]=e=>l(o).author=e),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u4F5C\u8005"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{span:12},{default:t(()=>[a(d,{label:"\u6587\u7AE0\u7B80\u4ECB",prop:"introduction"},{default:t(()=>[a(f,{modelValue:l(o).introduction,"onUpdate:modelValue":r[3]||(r[3]=e=>l(o).introduction=e),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u7B80\u4ECB"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{span:24},{default:t(()=>[a(d,{label:"\u6587\u7AE0\u5C01\u9762",prop:"picUrl"},{default:t(()=>[a(K,{modelValue:l(o).picUrl,"onUpdate:modelValue":r[4]||(r[4]=e=>l(o).picUrl=e),height:"80px"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{span:12},{default:t(()=>[a(d,{label:"\u6392\u5E8F",prop:"sort"},{default:t(()=>[a(Q,{modelValue:l(o).sort,"onUpdate:modelValue":r[5]||(r[5]=e=>l(o).sort=e),min:0,clearable:"","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{span:12},{default:t(()=>[a(d,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[a(q,{modelValue:l(o).status,"onUpdate:modelValue":r[6]||(r[6]=e=>l(o).status=e)},{default:t(()=>[(n(!0),v(y,null,U(l(xe)(l(B).COMMON_STATUS),e=>(n(),p(k,{key:e.value,label:e.value},{default:t(()=>[m(I(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(s,{span:12},{default:t(()=>[a(d,{label:"\u662F\u5426\u70ED\u95E8",prop:"recommendHot"},{default:t(()=>[a(q,{modelValue:l(o).recommendHot,"onUpdate:modelValue":r[7]||(r[7]=e=>l(o).recommendHot=e)},{default:t(()=>[(n(!0),v(y,null,U(l(R)(l(B).INFRA_BOOLEAN_STRING),e=>(n(),p(k,{key:e.value,label:e.value},{default:t(()=>[m(I(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(s,{span:12},{default:t(()=>[a(d,{label:"\u662F\u5426\u8F6E\u64AD\u56FE",prop:"recommendBanner"},{default:t(()=>[a(q,{modelValue:l(o).recommendBanner,"onUpdate:modelValue":r[8]||(r[8]=e=>l(o).recommendBanner=e)},{default:t(()=>[(n(!0),v(y,null,U(l(R)(l(B).INFRA_BOOLEAN_STRING),e=>(n(),p(k,{key:e.value,label:e.value},{default:t(()=>[m(I(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(s,{span:24},{default:t(()=>[a(d,{label:"\u5546\u54C1\u5173\u8054",prop:"spuId"},{default:t(()=>[l(o).spuId?(n(),p(W,{key:0,class:"mr-10px"},{default:t(()=>{var e;return[m(I((e=l(O).find(h=>h.id===l(o).spuId))==null?void 0:e.name),1)]}),_:1})):de("",!0),a(A,{onClick:r[9]||(r[9]=e=>{var h;return(h=l(F))==null?void 0:h.open()})},{default:t(()=>[m("\u9009\u62E9\u5546\u54C1")]),_:1})]),_:1})]),_:1}),a(s,{span:24},{default:t(()=>[a(d,{label:"\u6587\u7AE0\u5185\u5BB9"},{default:t(()=>[a(Y,{modelValue:l(o).content,"onUpdate:modelValue":r[10]||(r[10]=e=>l(o).content=e),height:"150px"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[ae,l(c)]])]),_:1},8,["modelValue","title"]),a(l(Re),{ref_key:"spuSelectRef",ref:F,onConfirm:M},null,512)],64)}}})});export{C as _,ze as __tla,T as d,D as g};
