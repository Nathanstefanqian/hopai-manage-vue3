import{_ as re,__tla as oe}from"./Descriptions-81a4e6d8.js";import{d as se,p as A,r as y,f as O,ax as pe,A as de,o as d,c as b,q as _,w as t,a as e,a1 as V,i as l,F as h,I as ue,k as T,j as n,t as v,av as ie,dp as ne,T as ce,D as me,E as _e,bG as fe,C as ye,ag as be,af as he,H as ke,n as Ve,M as ve,__tla as Ue}from"./index-0d81347e.js";import{E as ge,__tla as Ie}from"./el-image-fd00a23a.js";import{__tla as Te}from"./el-image-viewer-4844959b.js";import{_ as we,__tla as Pe}from"./UploadImgs-9ed1274f.js";import{_ as Ce,__tla as Le}from"./UploadImg-8f1eb75b.js";import{h as xe,d as De,t as Be}from"./tree-ebab458e.js";import{c as Fe,__tla as Se}from"./index-8e322d14.js";import{a as Re,D as Ee,__tla as Ne}from"./dict-d9e0d1ac.js";import{g as je,__tla as Ae}from"./index-e159b3ba.js";import{_ as Oe,__tla as qe}from"./ProductAttributes.vue_vue_type_script_setup_true_lang-0918137f.js";import{_ as Ge,__tla as Me}from"./ProductPropertyAddForm.vue_vue_type_script_setup_true_lang-3789e2ea.js";import{b as ze,__tla as He}from"./spu.data-d8ef4c2b.js";import{g as Je,__tla as Ke}from"./category-6094e7a1.js";import{g as Qe,__tla as Xe}from"./brand-04d1c3d7.js";import{u as We,__tla as Ye}from"./useCrudSchemas-911286a8.js";import{u as Ze,__tla as $e}from"./useMessage-da459548.js";import{r as c,__tla as ea}from"./formRules-ad0bc375.js";import{_ as w,__tla as aa}from"./SkuList.vue_vue_type_script_setup_true_lang-5191059c.js";let q,la=Promise.all([(()=>{try{return oe}catch{}})(),(()=>{try{return Ue}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return Pe}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return Se}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return Ae}catch{}})(),(()=>{try{return qe}catch{}})(),(()=>{try{return Me}catch{}})(),(()=>{try{return He}catch{}})(),(()=>{try{return Ke}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return $e}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return aa}catch{}})()]).then(async()=>{q=se({name:"ProductSpuBasicInfoForm",__name:"BasicInfoForm",props:{propFormData:{type:Object,default:()=>{}},activeName:A.string.def(""),isDetail:A.bool.def(!1)},emits:["update:activeName"],setup(U,{expose:G,emit:M}){const B=[{name:"stock",rule:s=>s>=1,message:"\u5546\u54C1\u5E93\u5B58\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 1 \uFF01\uFF01\uFF01"},{name:"price",rule:s=>s>=.01,message:"\u5546\u54C1\u9500\u552E\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"},{name:"marketPrice",rule:s=>s>=.01,message:"\u5546\u54C1\u5E02\u573A\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"},{name:"costPrice",rule:s=>s>=.01,message:"\u5546\u54C1\u6210\u672C\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"}],{allSchemas:z}=We(ze),F=s=>{const o=[];ie(s)?s.forEach(f=>{o.push(f.url)}):o.push(s),Fe({urlList:o})},H=Ze(),S=U,R=y(),P=y(),m=y([]),g=y(),J=s=>{g.value.generateTableData(s)},r=O({name:"",categoryId:null,keyword:"",unit:null,picUrl:"",sliderPicUrls:[],introduction:"",deliveryTemplateId:null,brandId:null,specType:!1,subCommissionType:!1,skus:[]}),K=O({name:[c],categoryId:[c],keyword:[c],unit:[c],introduction:[c],picUrl:[c],sliderPicUrls:[c],deliveryTemplateId:[],brandId:[c],specType:[c],subCommissionType:[c]});pe(()=>S.propFormData,s=>{var o;s&&(ne(r,s),r.sliderPicUrls=(o=s.sliderPicUrls)==null?void 0:o.map(f=>({url:f})),m.value=je(s))},{immediate:!0});const Q=M;G({validate:async()=>{if(g.value.validateSku(),P)return await e(P).validate(s=>{if(!s)throw H.warning("\u5546\u54C1\u4FE1\u606F\u672A\u5B8C\u5584\uFF01\uFF01"),Q("update:activeName","basicInfo"),new Error("\u5546\u54C1\u4FE1\u606F\u672A\u5B8C\u5584\uFF01\uFF01");Object.assign(S.propFormData,r)})}});const X=()=>{for(const s of r.skus)s.firstBrokeragePrice=0,s.secondBrokeragePrice=0},W=()=>{m.value=[],r.skus=[{price:0,marketPrice:0,costPrice:0,barCode:"",picUrl:"",stock:0,weight:0,volume:0,firstBrokeragePrice:0,secondBrokeragePrice:0}]},C=y([]),L=y([]),E=y([]);return de(async()=>{const s=await Je({});C.value=xe(s,"id","parentId"),L.value=await Qe()}),(s,o)=>{const f=ce,p=me,u=_e,Y=fe,x=ve,D=ye,Z=Ce,$=we,I=be,N=he,ee=ke,ae=Ve,le=ue,j=ge,te=re;return d(),b(h,null,[U.isDetail?V("",!0):(d(),_(le,{key:0,ref_key:"productSpuBasicInfoRef",ref:P,model:e(r),rules:e(K),"label-width":"120px"},{default:t(()=>[l(ae,null,{default:t(()=>[l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u540D\u79F0",prop:"name"},{default:t(()=>[l(f,{modelValue:e(r).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(r).name=a),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5206\u7C7B",prop:"categoryId"},{default:t(()=>[l(Y,{modelValue:e(r).categoryId,"onUpdate:modelValue":o[1]||(o[1]=a=>e(r).categoryId=a),options:e(C),props:e(De),class:"w-1/1",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7C7B",filterable:""},null,8,["modelValue","options","props"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5173\u952E\u5B57",prop:"keyword"},{default:t(()=>[l(f,{modelValue:e(r).keyword,"onUpdate:modelValue":o[2]||(o[2]=a=>e(r).keyword=a),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5173\u952E\u5B57"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5355\u4F4D",prop:"unit"},{default:t(()=>[l(D,{modelValue:e(r).unit,"onUpdate:modelValue":o[3]||(o[3]=a=>e(r).unit=a),class:"w-1/1",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D"},{default:t(()=>[(d(!0),b(h,null,T(e(Re)(e(Ee).PRODUCT_UNIT),a=>(d(),_(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u7B80\u4ECB",prop:"introduction"},{default:t(()=>[l(f,{modelValue:e(r).introduction,"onUpdate:modelValue":o[4]||(o[4]=a=>e(r).introduction=a),rows:3,placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7B80\u4ECB",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5C01\u9762\u56FE",prop:"picUrl"},{default:t(()=>[l(Z,{modelValue:e(r).picUrl,"onUpdate:modelValue":o[5]||(o[5]=a=>e(r).picUrl=a),height:"80px"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:t(()=>[l(p,{label:"\u5546\u54C1\u8F6E\u64AD\u56FE",prop:"sliderPicUrls"},{default:t(()=>[l($,{modelValue:e(r).sliderPicUrls,"onUpdate:modelValue":o[6]||(o[6]=a=>e(r).sliderPicUrls=a)},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u8FD0\u8D39\u6A21\u677F",prop:"deliveryTemplateId"},{default:t(()=>[l(D,{modelValue:e(r).deliveryTemplateId,"onUpdate:modelValue":o[7]||(o[7]=a=>e(r).deliveryTemplateId=a),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(d(!0),b(h,null,T(e(E),a=>(d(),_(x,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u54C1\u724C",prop:"brandId"},{default:t(()=>[l(D,{modelValue:e(r).brandId,"onUpdate:modelValue":o[8]||(o[8]=a=>e(r).brandId=a),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(d(!0),b(h,null,T(e(L),a=>(d(),_(x,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u89C4\u683C",props:"specType"},{default:t(()=>[l(N,{modelValue:e(r).specType,"onUpdate:modelValue":o[9]||(o[9]=a=>e(r).specType=a),onChange:W},{default:t(()=>[l(I,{label:!1,class:"radio"},{default:t(()=>[n("\u5355\u89C4\u683C")]),_:1}),l(I,{label:!0},{default:t(()=>[n("\u591A\u89C4\u683C")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5206\u9500\u7C7B\u578B",props:"subCommissionType"},{default:t(()=>[l(N,{modelValue:e(r).subCommissionType,"onUpdate:modelValue":o[10]||(o[10]=a=>e(r).subCommissionType=a),onChange:X},{default:t(()=>[l(I,{label:!1},{default:t(()=>[n("\u9ED8\u8BA4\u8BBE\u7F6E")]),_:1}),l(I,{label:!0,class:"radio"},{default:t(()=>[n("\u5355\u72EC\u8BBE\u7F6E")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:t(()=>[e(r).specType?V("",!0):(d(),_(p,{key:0},{default:t(()=>[l(e(w),{ref_key:"skuListRef",ref:g,"prop-form-data":e(r),propertyList:e(m),"rule-config":B},null,8,["prop-form-data","propertyList"])]),_:1})),e(r).specType?(d(),_(p,{key:1,label:"\u5546\u54C1\u5C5E\u6027"},{default:t(()=>[l(ee,{class:"mb-10px mr-15px",onClick:e(R).open},{default:t(()=>[n("\u6DFB\u52A0\u5C5E\u6027")]),_:1},8,["onClick"]),l(Oe,{propertyList:e(m),onSuccess:J},null,8,["propertyList"])]),_:1})):V("",!0),e(r).specType&&e(m).length>0?(d(),b(h,{key:2},[l(p,{label:"\u6279\u91CF\u8BBE\u7F6E"},{default:t(()=>[l(e(w),{"is-batch":!0,"prop-form-data":e(r),propertyList:e(m)},null,8,["prop-form-data","propertyList"])]),_:1}),l(p,{label:"\u5C5E\u6027\u5217\u8868"},{default:t(()=>[l(e(w),{ref_key:"skuListRef",ref:g,"prop-form-data":e(r),propertyList:e(m),"rule-config":B},null,8,["prop-form-data","propertyList"])]),_:1})],64)):V("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),U.isDetail?(d(),_(te,{key:1,data:e(r),schema:e(z).detailSchema},{categoryId:t(({row:a})=>{return[n(v((i=a.categoryId,Be(C.value,i))),1)];var i}),brandId:t(({row:a})=>{var i;return[n(v((i=e(L).find(k=>k.id===a.brandId))==null?void 0:i.name),1)]}),deliveryTemplateId:t(({row:a})=>{var i;return[n(v((i=e(E).find(k=>k.id===a.deliveryTemplateId))==null?void 0:i.name),1)]}),specType:t(({row:a})=>[n(v(a.specType?"\u591A\u89C4\u683C":"\u5355\u89C4\u683C"),1)]),subCommissionType:t(({row:a})=>[n(v(a.subCommissionType?"\u5355\u72EC\u8BBE\u7F6E":"\u9ED8\u8BA4\u8BBE\u7F6E"),1)]),picUrl:t(({row:a})=>[l(j,{src:a.picUrl,class:"h-60px w-60px",onClick:i=>F(a.picUrl)},null,8,["src","onClick"])]),sliderPicUrls:t(({row:a})=>[(d(!0),b(h,null,T(a.sliderPicUrls,(i,k)=>(d(),_(j,{key:k,src:i.url,class:"mr-10px h-60px w-60px",onClick:ta=>F(a.sliderPicUrls)},null,8,["src","onClick"]))),128))]),skus:t(()=>[l(e(w),{ref:"skuDetailListRef","is-detail":U.isDetail,"prop-form-data":e(r),propertyList:e(m)},null,8,["is-detail","prop-form-data","propertyList"])]),_:1},8,["data","schema"])):V("",!0),l(Ge,{ref_key:"attributesAddFormRef",ref:R,propertyList:e(m)},null,8,["propertyList"])],64)}}})});export{q as _,la as __tla};
