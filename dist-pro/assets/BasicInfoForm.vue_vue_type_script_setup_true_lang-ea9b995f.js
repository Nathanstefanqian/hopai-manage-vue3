import{_ as re,__tla as se}from"./Descriptions-ecddef8a.js";import{d as oe,aa as A,r as y,b as E,au as pe,j as de,o as d,c as b,l as _,w as t,a as e,V,f as l,F as h,A as ue,k as T,m as n,t as U,as as ie,dm as ne,M as ce,x as me,a3 as _e,bB as fe,q as ye,v as be,ab as he,ac as ke,z as Ve,a5 as Ue,__tla as ve}from"./index-456ccb5c.js";import{E as ge,__tla as Ie}from"./el-image-af14a6b7.js";import{__tla as Te}from"./el-image-viewer-5ea9d668.js";import{_ as we,__tla as Pe}from"./UploadImgs-f366bb9f.js";import{_ as Ce,__tla as Le}from"./UploadImg-42841f7d.js";import{h as xe,d as De,t as Be}from"./tree-ebab458e.js";import{c as Fe,__tla as Re}from"./index-0a7e975b.js";import{a as Se,D as Ne,__tla as Oe}from"./dict-000efb2b.js";import{g as je,__tla as Ae}from"./index-15d920e1.js";import{_ as Ee,__tla as ze}from"./ProductAttributes.vue_vue_type_script_setup_true_lang-e3d45a3c.js";import{_ as qe,__tla as Ge}from"./ProductPropertyAddForm.vue_vue_type_script_setup_true_lang-39d00c86.js";import{b as Je,__tla as Me}from"./spu.data-ba187dce.js";import{g as We,__tla as Xe}from"./category-69cd96e4.js";import{g as Ze,__tla as $e}from"./brand-7b23104f.js";import{u as He,__tla as Ke}from"./useCrudSchemas-e7c2c8da.js";import{u as Qe,__tla as Ye}from"./useMessage-59021f66.js";import{r as c,__tla as ea}from"./formRules-8bcd5a91.js";import{_ as w,__tla as aa}from"./SkuList.vue_vue_type_script_setup_true_lang-9c6179aa.js";let z,la=Promise.all([(()=>{try{return se}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return Pe}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return Re}catch{}})(),(()=>{try{return Oe}catch{}})(),(()=>{try{return Ae}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return Ge}catch{}})(),(()=>{try{return Me}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return $e}catch{}})(),(()=>{try{return Ke}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return aa}catch{}})()]).then(async()=>{z=oe({name:"ProductSpuBasicInfoForm",__name:"BasicInfoForm",props:{propFormData:{type:Object,default:()=>{}},activeName:A.string.def(""),isDetail:A.bool.def(!1)},emits:["update:activeName"],setup(v,{expose:q,emit:G}){const B=[{name:"stock",rule:o=>o>=1,message:"\u5546\u54C1\u5E93\u5B58\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 1 \uFF01\uFF01\uFF01"},{name:"price",rule:o=>o>=.01,message:"\u5546\u54C1\u9500\u552E\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"},{name:"marketPrice",rule:o=>o>=.01,message:"\u5546\u54C1\u5E02\u573A\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"},{name:"costPrice",rule:o=>o>=.01,message:"\u5546\u54C1\u6210\u672C\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 0.01 \u5143\uFF01\uFF01\uFF01"}],{allSchemas:J}=He(Je),F=o=>{const s=[];ie(o)?o.forEach(f=>{s.push(f.url)}):s.push(o),Fe({urlList:s})},M=Qe(),R=v,S=y(),P=y(),m=y([]),g=y(),W=o=>{g.value.generateTableData(o)},r=E({name:"",categoryId:null,keyword:"",unit:null,picUrl:"",sliderPicUrls:[],introduction:"",deliveryTemplateId:null,brandId:null,specType:!1,subCommissionType:!1,skus:[],description:[]}),X=E({name:[c],categoryId:[c],keyword:[c],unit:[c],introduction:[c],picUrl:[c],sliderPicUrls:[c],deliveryTemplateId:[],brandId:[c],specType:[c],subCommissionType:[c]});pe(()=>R.propFormData,o=>{var s;o&&(ne(r,o),o.sliderPicUrls.length&&(r.sliderPicUrls=(s=o.sliderPicUrls)==null?void 0:s.map(f=>({url:f}))),m.value=je(o))},{immediate:!0});const Z=G;q({validate:async()=>{if(g.value.validateSku(),P)return await e(P).validate(o=>{if(!o)throw M.warning("\u5546\u54C1\u4FE1\u606F\u672A\u5B8C\u5584\uFF01\uFF01"),Z("update:activeName","basicInfo"),new Error("\u5546\u54C1\u4FE1\u606F\u672A\u5B8C\u5584\uFF01\uFF01");Object.assign(R.propFormData,r)})}});const $=()=>{for(const o of r.skus)o.firstBrokeragePrice=0,o.secondBrokeragePrice=0},H=()=>{m.value=[],r.skus=[{price:0,marketPrice:0,costPrice:0,barCode:"",picUrl:"",stock:0,weight:0,volume:0,firstBrokeragePrice:0,secondBrokeragePrice:0}]},C=y([]),L=y([]),N=y([]);return de(async()=>{const o=await We({});C.value=xe(o,"id","parentId"),L.value=await Ze()}),(o,s)=>{const f=ce,p=me,u=_e,K=fe,x=ye,D=be,Q=Ce,Y=we,I=he,O=ke,ee=Ve,ae=Ue,le=ue,j=ge,te=re;return d(),b(h,null,[v.isDetail?V("",!0):(d(),_(le,{key:0,ref_key:"productSpuBasicInfoRef",ref:P,model:e(r),rules:e(X),"label-width":"120px"},{default:t(()=>[l(ae,null,{default:t(()=>[l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u540D\u79F0",prop:"name"},{default:t(()=>[l(f,{modelValue:e(r).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(r).name=a),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5206\u7C7B",prop:"categoryId"},{default:t(()=>[l(K,{modelValue:e(r).categoryId,"onUpdate:modelValue":s[1]||(s[1]=a=>e(r).categoryId=a),options:e(C),props:e(De),class:"w-1/1",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7C7B",filterable:""},null,8,["modelValue","options","props"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5173\u952E\u5B57",prop:"keyword"},{default:t(()=>[l(f,{modelValue:e(r).keyword,"onUpdate:modelValue":s[2]||(s[2]=a=>e(r).keyword=a),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5173\u952E\u5B57"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5355\u4F4D",prop:"unit"},{default:t(()=>[l(D,{modelValue:e(r).unit,"onUpdate:modelValue":s[3]||(s[3]=a=>e(r).unit=a),class:"w-1/1",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D"},{default:t(()=>[(d(!0),b(h,null,T(e(Se)(e(Ne).PRODUCT_UNIT),a=>(d(),_(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u7B80\u4ECB",prop:"introduction"},{default:t(()=>[l(f,{modelValue:e(r).introduction,"onUpdate:modelValue":s[4]||(s[4]=a=>e(r).introduction=a),rows:3,placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7B80\u4ECB",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u5C01\u9762\u56FE",prop:"picUrl"},{default:t(()=>[l(Q,{modelValue:e(r).picUrl,"onUpdate:modelValue":s[5]||(s[5]=a=>e(r).picUrl=a),height:"80px"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:t(()=>[l(p,{label:"\u5546\u54C1\u8F6E\u64AD\u56FE",prop:"sliderPicUrls"},{default:t(()=>[l(Y,{modelValue:e(r).sliderPicUrls,"onUpdate:modelValue":s[6]||(s[6]=a=>e(r).sliderPicUrls=a)},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u8FD0\u8D39\u6A21\u677F",prop:"deliveryTemplateId"},{default:t(()=>[l(D,{modelValue:e(r).deliveryTemplateId,"onUpdate:modelValue":s[7]||(s[7]=a=>e(r).deliveryTemplateId=a),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(d(!0),b(h,null,T(e(N),a=>(d(),_(x,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u54C1\u724C",prop:"brandId"},{default:t(()=>[l(D,{modelValue:e(r).brandId,"onUpdate:modelValue":s[8]||(s[8]=a=>e(r).brandId=a),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(d(!0),b(h,null,T(e(L),a=>(d(),_(x,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5546\u54C1\u89C4\u683C",props:"specType"},{default:t(()=>[l(O,{modelValue:e(r).specType,"onUpdate:modelValue":s[9]||(s[9]=a=>e(r).specType=a),onChange:H},{default:t(()=>[l(I,{label:!1,class:"radio"},{default:t(()=>[n("\u5355\u89C4\u683C")]),_:1}),l(I,{label:!0},{default:t(()=>[n("\u591A\u89C4\u683C")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:t(()=>[l(p,{label:"\u5206\u9500\u7C7B\u578B",props:"subCommissionType"},{default:t(()=>[l(O,{modelValue:e(r).subCommissionType,"onUpdate:modelValue":s[10]||(s[10]=a=>e(r).subCommissionType=a),onChange:$},{default:t(()=>[l(I,{label:!1},{default:t(()=>[n("\u9ED8\u8BA4\u8BBE\u7F6E")]),_:1}),l(I,{label:!0,class:"radio"},{default:t(()=>[n("\u5355\u72EC\u8BBE\u7F6E")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:t(()=>[e(r).specType?V("",!0):(d(),_(p,{key:0},{default:t(()=>[l(e(w),{ref_key:"skuListRef",ref:g,"prop-form-data":e(r),propertyList:e(m),"rule-config":B},null,8,["prop-form-data","propertyList"])]),_:1})),e(r).specType?(d(),_(p,{key:1,label:"\u5546\u54C1\u5C5E\u6027"},{default:t(()=>[l(ee,{class:"mb-10px mr-15px",onClick:e(S).open},{default:t(()=>[n("\u6DFB\u52A0\u5C5E\u6027")]),_:1},8,["onClick"]),l(Ee,{propertyList:e(m),onSuccess:W},null,8,["propertyList"])]),_:1})):V("",!0),e(r).specType&&e(m).length>0?(d(),b(h,{key:2},[l(p,{label:"\u6279\u91CF\u8BBE\u7F6E"},{default:t(()=>[l(e(w),{"is-batch":!0,"prop-form-data":e(r),propertyList:e(m)},null,8,["prop-form-data","propertyList"])]),_:1}),l(p,{label:"\u5C5E\u6027\u5217\u8868"},{default:t(()=>[l(e(w),{ref_key:"skuListRef",ref:g,"prop-form-data":e(r),propertyList:e(m),"rule-config":B},null,8,["prop-form-data","propertyList"])]),_:1})],64)):V("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),v.isDetail?(d(),_(te,{key:1,data:e(r),schema:e(J).detailSchema},{categoryId:t(({row:a})=>{return[n(U((i=a.categoryId,Be(C.value,i))),1)];var i}),brandId:t(({row:a})=>{var i;return[n(U((i=e(L).find(k=>k.id===a.brandId))==null?void 0:i.name),1)]}),deliveryTemplateId:t(({row:a})=>{var i;return[n(U((i=e(N).find(k=>k.id===a.deliveryTemplateId))==null?void 0:i.name),1)]}),specType:t(({row:a})=>[n(U(a.specType?"\u591A\u89C4\u683C":"\u5355\u89C4\u683C"),1)]),subCommissionType:t(({row:a})=>[n(U(a.subCommissionType?"\u5355\u72EC\u8BBE\u7F6E":"\u9ED8\u8BA4\u8BBE\u7F6E"),1)]),picUrl:t(({row:a})=>[l(j,{src:a.picUrl,class:"h-60px w-60px",onClick:i=>F(a.picUrl)},null,8,["src","onClick"])]),sliderPicUrls:t(({row:a})=>[(d(!0),b(h,null,T(a.sliderPicUrls,(i,k)=>(d(),_(j,{key:k,src:i.url,class:"mr-10px h-60px w-60px",onClick:ta=>F(a.sliderPicUrls)},null,8,["src","onClick"]))),128))]),skus:t(()=>[l(e(w),{ref:"skuDetailListRef","is-detail":v.isDetail,"prop-form-data":e(r),propertyList:e(m)},null,8,["is-detail","prop-form-data","propertyList"])]),_:1},8,["data","schema"])):V("",!0),l(qe,{ref_key:"attributesAddFormRef",ref:S,propertyList:e(m)},null,8,["propertyList"])],64)}}})});export{z as _,la as __tla};
