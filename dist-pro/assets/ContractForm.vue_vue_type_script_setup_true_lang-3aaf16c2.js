import{ao as i,d as H,l as R,r as v,f as z,o as w,q as T,w as t,i as e,a as l,j as g,B as A,x as J,T as K,D as M,E as N,n as O,G as Q,I as W,H as X,L as Y,__tla as Z}from"./index-0d81347e.js";import{_ as $,__tla as ee}from"./Dialog.vue_vue_type_style_index_0_lang-9d93c798.js";import{u as ae,__tla as le}from"./useMessage-da459548.js";let x,P,k,L,de=Promise.all([(()=>{try{return Z}catch{}})(),(()=>{try{return ee}catch{}})(),(()=>{try{return le}catch{}})()]).then(async()=>{L=async c=>await i.get({url:"/crm/contract/page",params:c}),P=async c=>await i.delete({url:"/crm/contract/delete?id="+c}),k=async c=>await i.download({url:"/crm/contract/export-excel",params:c}),x=H({__name:"ContractForm",emits:["success"],setup(c,{expose:D,emit:C}){const{t:I}=R(),U=ae(),m=v(!1),b=v(""),p=v(!1),h=v(""),d=v({id:void 0,name:void 0,customerId:void 0,businessId:void 0,processInstanceId:void 0,orderDate:void 0,ownerUserId:void 0,no:void 0,startTime:void 0,endTime:void 0,price:void 0,discountPercent:void 0,productPrice:void 0,roUserIds:void 0,rwUserIds:void 0,contactId:void 0,signUserId:void 0,contactLastTime:void 0,remark:void 0}),q=z({name:[{required:!0,message:"\u5408\u540C\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),V=v();D({open:async(s,a)=>{if(m.value=!0,b.value=I("action."+s),h.value=s,j(),a){p.value=!0;try{d.value=await(async u=>await i.get({url:"/crm/contract/get?id="+u}))(a)}finally{p.value=!1}}}});const F=C,S=async()=>{if(V&&await V.value.validate()){p.value=!0;try{const s=d.value;h.value==="create"?(await(async a=>await i.post({url:"/crm/contract/create",data:a}))(s),U.success(I("common.createSuccess"))):(await(async a=>await i.put({url:"/crm/contract/update",data:a}))(s),U.success(I("common.updateSuccess"))),m.value=!1,F("success")}finally{p.value=!1}}},j=()=>{var s;d.value={id:void 0,name:void 0,customerId:void 0,businessId:void 0,processInstanceId:void 0,orderDate:void 0,ownerUserId:void 0,no:void 0,startTime:void 0,endTime:void 0,price:void 0,discountPercent:void 0,productPrice:void 0,roUserIds:void 0,rwUserIds:void 0,contactId:void 0,signUserId:void 0,contactLastTime:void 0,remark:void 0},(s=V.value)==null||s.resetFields()};return(s,a)=>{const u=K,r=M,n=N,_=O,f=Q,B=W,y=X,E=$,G=Y;return w(),T(E,{title:l(b),modelValue:l(m),"onUpdate:modelValue":a[19]||(a[19]=o=>J(m)?m.value=o:null)},{footer:t(()=>[e(y,{onClick:S,type:"primary",disabled:l(p)},{default:t(()=>[g("\u786E \u5B9A")]),_:1},8,["disabled"]),e(y,{onClick:a[18]||(a[18]=o=>m.value=!1)},{default:t(()=>[g("\u53D6 \u6D88")]),_:1})]),default:t(()=>[A((w(),T(B,{ref_key:"formRef",ref:V,model:l(d),rules:l(q),"label-width":"100px"},{default:t(()=>[e(_,null,{default:t(()=>[e(n,{span:12},{default:t(()=>[e(r,{label:"\u5408\u540C\u540D\u79F0",prop:"name"},{default:t(()=>[e(u,{modelValue:l(d).name,"onUpdate:modelValue":a[0]||(a[0]=o=>l(d).name=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(r,{label:"\u5BA2\u6237",prop:"customerId"},{default:t(()=>[e(u,{modelValue:l(d).customerId,"onUpdate:modelValue":a[1]||(a[1]=o=>l(d).customerId=o),placeholder:"\u8BF7\u9009\u62E9\u5BF9\u5E94\u5BA2\u6237"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{label:"\u5546\u673A\u540D\u79F0",prop:"businessId"},{default:t(()=>[e(u,{modelValue:l(d).businessId,"onUpdate:modelValue":a[2]||(a[2]=o=>l(d).businessId=o),placeholder:"\u8BF7\u9009\u62E9\u5BF9\u5E94\u5546\u673A"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u5DE5\u4F5C\u6D41",prop:"processInstanceId"},{default:t(()=>[e(u,{modelValue:l(d).processInstanceId,"onUpdate:modelValue":a[3]||(a[3]=o=>l(d).processInstanceId=o),placeholder:"\u8BF7\u9009\u62E9\u5DE5\u4F5C\u6D41"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u4E0B\u5355\u65E5\u671F",prop:"orderDate"},{default:t(()=>[e(f,{modelValue:l(d).orderDate,"onUpdate:modelValue":a[4]||(a[4]=o=>l(d).orderDate=o),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u4E0B\u5355\u65E5\u671F"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:t(()=>[e(u,{modelValue:l(d).ownerUserId,"onUpdate:modelValue":a[5]||(a[5]=o=>l(d).ownerUserId=o),placeholder:"\u8BF7\u9009\u62E9\u8D1F\u8D23\u4EBA"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u5408\u540C\u7F16\u53F7",prop:"no"},{default:t(()=>[e(u,{modelValue:l(d).no,"onUpdate:modelValue":a[6]||(a[6]=o=>l(d).no=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u7F16\u53F7"},null,8,["modelValue"])]),_:1}),e(_,null,{default:t(()=>[e(n,{span:12},{default:t(()=>[e(r,{label:"\u5F00\u59CB\u65F6\u95F4",prop:"startTime"},{default:t(()=>[e(f,{modelValue:l(d).startTime,"onUpdate:modelValue":a[7]||(a[7]=o=>l(d).startTime=o),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u5F00\u59CB\u65F6\u95F4"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(r,{label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime"},{default:t(()=>[e(f,{modelValue:l(d).endTime,"onUpdate:modelValue":a[8]||(a[8]=o=>l(d).endTime=o),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(n,{span:8},{default:t(()=>[e(r,{label:"\u5408\u540C\u91D1\u989D",prop:"price"},{default:t(()=>[e(u,{modelValue:l(d).price,"onUpdate:modelValue":a[9]||(a[9]=o=>l(d).price=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u91D1\u989D"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:t(()=>[e(r,{label:"\u6574\u5355\u6298\u6263",prop:"discountPercent"},{default:t(()=>[e(u,{modelValue:l(d).discountPercent,"onUpdate:modelValue":a[10]||(a[10]=o=>l(d).discountPercent=o),placeholder:"\u8BF7\u8F93\u5165\u6574\u5355\u6298\u6263"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:t(()=>[e(r,{label:"\u4EA7\u54C1\u603B\u91D1\u989D",prop:"productPrice"},{default:t(()=>[e(u,{modelValue:l(d).productPrice,"onUpdate:modelValue":a[11]||(a[11]=o=>l(d).productPrice=o),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u603B\u91D1\u989D"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{label:"\u53EA\u8BFB\u6743\u9650\u7684\u7528\u6237",prop:"roUserIds"},{default:t(()=>[e(u,{modelValue:l(d).roUserIds,"onUpdate:modelValue":a[12]||(a[12]=o=>l(d).roUserIds=o),placeholder:"\u8BF7\u8F93\u5165\u53EA\u8BFB\u6743\u9650\u7684\u7528\u6237"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u8BFB\u5199\u6743\u9650\u7684\u7528\u6237",prop:"rwUserIds"},{default:t(()=>[e(u,{modelValue:l(d).rwUserIds,"onUpdate:modelValue":a[13]||(a[13]=o=>l(d).rwUserIds=o),placeholder:"\u8BF7\u8F93\u5165\u8BFB\u5199\u6743\u9650\u7684\u7528\u6237"},null,8,["modelValue"])]),_:1}),e(_,null,{default:t(()=>[e(n,{span:12},{default:t(()=>[e(r,{label:"\u8054\u7CFB\u4EBA\u7F16\u53F7",prop:"contactId"},{default:t(()=>[e(u,{modelValue:l(d).contactId,"onUpdate:modelValue":a[14]||(a[14]=o=>l(d).contactId=o),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u7F16\u53F7"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(r,{label:"\u516C\u53F8\u7B7E\u7EA6\u4EBA",prop:"signUserId"},{default:t(()=>[e(u,{modelValue:l(d).signUserId,"onUpdate:modelValue":a[15]||(a[15]=o=>l(d).signUserId=o),placeholder:"\u8BF7\u8F93\u5165\u516C\u53F8\u7B7E\u7EA6\u4EBA"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{label:"\u6700\u540E\u8DDF\u8FDB\u65F6\u95F4",prop:"contactLastTime"},{default:t(()=>[e(f,{modelValue:l(d).contactLastTime,"onUpdate:modelValue":a[16]||(a[16]=o=>l(d).contactLastTime=o),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u6700\u540E\u8DDF\u8FDB\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[e(u,{modelValue:l(d).remark,"onUpdate:modelValue":a[17]||(a[17]=o=>l(d).remark=o),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[G,l(p)]])]),_:1},8,["title","modelValue"])}}})});export{x as _,de as __tla,P as d,k as e,L as g};
