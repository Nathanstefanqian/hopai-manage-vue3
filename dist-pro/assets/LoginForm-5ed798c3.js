import{d as A,r as d,u as D,Y as J,b as K,a as e,f as H,ax as Q,A as W,B as X,a0 as Z,o as $,q as aa,w as t,i as a,P as ea,j as E,t as L,l as ta,a2 as la,a6 as ra,a7 as oa,a8 as na,a9 as sa,a4 as ia,D as pa,E as da,T as ma,aa as ua,n as ca,I as _a,ab as fa,ac as ga,g as ha,ad as wa,ae as ya,__tla as xa}from"./index-0d81347e.js";import{_ as ba,__tla as Fa}from"./Verify-177a8eb5.js";import{_ as va,__tla as Va}from"./XButton-0c88cf02.js";import{E as ka,__tla as Ea}from"./el-link-6c64b48c.js";import{_ as La}from"./hopai-678f05ab.js";import{u as Ma,L as g,_ as Na,a as Pa,__tla as Ia}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-bae54713.js";import{u as h,__tla as Ra}from"./useIcon-baaaf6b7.js";import{u as Sa,__tla as za}from"./useMessage-da459548.js";import{r as w,__tla as Ca}from"./formRules-ad0bc375.js";import{_ as Ta}from"./_plugin-vue_export-helper-1b428a4d.js";import"./_commonjs-dynamic-modules-3e972b61.js";let M,ja=Promise.all([(()=>{try{return xa}catch{}})(),(()=>{try{return Fa}catch{}})(),(()=>{try{return Va}catch{}})(),(()=>{try{return Ea}catch{}})(),(()=>{try{return Ia}catch{}})(),(()=>{try{return Ra}catch{}})(),(()=>{try{return za}catch{}})(),(()=>{try{return Ca}catch{}})()]).then(async()=>{let y;y=(u=>(fa("data-v-1b0ae945"),u=u(),ga(),u))(()=>ha("img",{alt:"",class:"mx-auto h-100px w-100px",src:La},null,-1)),M=Ta(A({name:"LoginForm",__name:"LoginForm",setup(u){const{t:p}=ta();Sa(),h({icon:"ep:house"});const N=h({icon:"ep:avatar"}),P=h({icon:"ep:lock"}),x=d(),{validForm:I}=Pa(x),{setLoginState:b,getLoginState:R}=Ma(),{currentRoute:S,push:z}=D(),C=J(),m=d(""),c=d(!1),F=d(),T=d("blockPuzzle"),j=K(()=>e(R)===g.LOGIN),O={tenantName:[w],username:[w],password:[w]},r=H({isShowPassword:!1,captchaEnable:"true",tenantEnable:"true",loginForm:{tenantName:"\u548C\u62CD\u6E90\u7801",username:"admin",password:"admin123",captchaVerification:"",rememberMe:!1}}),v=async()=>{r.captchaEnable==="false"||F.value.show()},V=d(),U=async o=>{c.value=!0;try{if(await(async()=>{if(r.tenantEnable==="true"){const s=await wa(r.loginForm.tenantName);ya(s)}})(),!await I())return;r.loginForm.captchaVerification=o.captchaVerification;const l=await ra(r.loginForm);if(!l)return;V.value=oa.service({lock:!0,text:"\u6B63\u5728\u52A0\u8F7D\u7CFB\u7EDF\u4E2D...",background:"rgba(0, 0, 0, 0.7)"}),r.loginForm.rememberMe?na(r.loginForm):sa(),ia(l),m.value||(m.value="/"),m.value.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):z({path:m.value||C.addRouters[0].path})}finally{c.value=!1,V.value.close()}};return Q(()=>S.value,o=>{var l;m.value=(l=o==null?void 0:o.query)==null?void 0:l.redirect},{immediate:!0}),W(()=>{(()=>{const o=la();o&&(r.loginForm={...r.loginForm,username:o.username?o.username:r.loginForm.username,password:o.password?o.password:r.loginForm.password,rememberMe:!!o.rememberMe,tenantName:o.tenantName?o.tenantName:r.loginForm.tenantName})})()}),(o,l)=>{const s=pa,n=da,k=ma,q=ua,B=ka,_=ca,f=va,G=ba,Y=_a;return X(($(),aa(Y,{ref_key:"formLogin",ref:x,model:e(r).loginForm,rules:O,class:"login-form","label-position":"top","label-width":"120px",size:"large"},{default:t(()=>[a(_,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:t(()=>[a(n,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(s,null,{default:t(()=>[y]),_:1}),a(s,null,{default:t(()=>[a(Na,{class:"mx-auto"})]),_:1})]),_:1}),a(n,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(s,{prop:"username"},{default:t(()=>[a(k,{modelValue:e(r).loginForm.username,"onUpdate:modelValue":l[0]||(l[0]=i=>e(r).loginForm.username=i),placeholder:e(p)("login.usernamePlaceholder"),"prefix-icon":e(N)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),a(n,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(s,{prop:"password"},{default:t(()=>[a(k,{modelValue:e(r).loginForm.password,"onUpdate:modelValue":l[1]||(l[1]=i=>e(r).loginForm.password=i),placeholder:e(p)("login.passwordPlaceholder"),"prefix-icon":e(P),"show-password":"",type:"password",onKeyup:l[2]||(l[2]=ea(i=>v(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),a(n,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:t(()=>[a(s,null,{default:t(()=>[a(_,{justify:"space-between",style:{width:"100%"}},{default:t(()=>[a(n,{span:6},{default:t(()=>[a(q,{modelValue:e(r).loginForm.rememberMe,"onUpdate:modelValue":l[3]||(l[3]=i=>e(r).loginForm.rememberMe=i)},{default:t(()=>[E(L(e(p)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),a(n,{offset:6,span:12},{default:t(()=>[a(B,{style:{float:"right"},type:"primary"},{default:t(()=>[E(L(e(p)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(n,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(s,null,{default:t(()=>[a(f,{loading:e(c),title:e(p)("login.login"),class:"w-[100%]",onClick:l[4]||(l[4]=i=>v())},null,8,["loading","title"])]),_:1})]),_:1}),a(G,{ref_key:"verify",ref:F,captchaType:e(T),imgSize:{width:"400px",height:"200px"},mode:"pop",onSuccess:U},null,8,["captchaType"]),a(n,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(s,null,{default:t(()=>[a(_,{gutter:5,justify:"space-between",style:{width:"100%"}},{default:t(()=>[a(n,{span:8},{default:t(()=>[a(f,{title:e(p)("login.btnMobile"),class:"w-[100%]",onClick:l[5]||(l[5]=i=>e(b)(e(g).MOBILE))},null,8,["title"])]),_:1}),a(n,{span:8}),a(n,{span:8},{default:t(()=>[a(f,{title:e(p)("login.btnRegister"),class:"w-[100%]",onClick:l[6]||(l[6]=i=>e(b)(e(g).REGISTER))},null,8,["title"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[Z,e(j)]])}}}),[["__scopeId","data-v-1b0ae945"]])});export{ja as __tla,M as default};
