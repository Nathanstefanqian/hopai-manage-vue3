import{d as W,r as s,b as X,j as Y,o,l as q,w as t,f as r,m as v,a,c as V,p as Z,e as g,F as P,k as D,t as L,i as R,V as $,bO as ee,x as ae,af as le,cb as te,z as re,a4 as se,by as ue,A as oe,D as de,__tla as _e}from"./index-456ccb5c.js";import{_ as ne,__tla as ie}from"./Dialog.vue_vue_type_style_index_0_lang-c9eb9937.js";import{E as ce,__tla as me}from"./el-tree-select-fec4ab3b.js";import{u as fe,__tla as pe}from"./index-6b56c1f5.js";import{g as ve,__tla as ye}from"./index-edbe6bdd.js";import{a as Ie,__tla as be}from"./spu-364c3f5b.js";import{_ as he,__tla as Ve}from"./MemberTagSelect.vue_vue_type_script_setup_true_lang-739703a9.js";import{d as ge}from"./tree-ebab458e.js";import{u as ke,__tla as ze}from"./useMessage-59021f66.js";import{_ as xe}from"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as we}from"./index-5203da14.js";import{__tla as Ce}from"./TagForm.vue_vue_type_script_setup_true_lang-f4637f87.js";import{__tla as qe}from"./index-b4f6ae57.js";let S,Ue=Promise.all([(()=>{try{return _e}catch{}})(),(()=>{try{return ie}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return pe}catch{}})(),(()=>{try{return ye}catch{}})(),(()=>{try{return be}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return we}catch{}})(),(()=>{try{return Ce}catch{}})(),(()=>{try{return qe}catch{}})()]).then(async()=>{let U,F,N;U={key:0},F={class:"scrollbar-flex-content"},N={class:"flex"},S=xe(W({__name:"OrderForm",props:{userInfo:{}},setup(B,{expose:G}){const j=s(""),c=s(!1),H=B,k=s(),z=s([]),A=s([]),d=s(""),E=ke(),x=s(!1),m=s({...H.userInfo}),w=s([...m.value.areaNames]),u=s({areaIds:[...m.value.areaIds],levelId:m.value.levelId,bizIds:m.value.bizList}),J=X({levelId:[{required:!0,message:"\u6444\u5F71\u5E08\u7B49\u7EA7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],bizIds:[{required:!0,message:"\u670D\u52A1\u8303\u56F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],areaIds:[{required:!0,message:"\u670D\u52A1\u533A\u57DF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),K=()=>{const f=(e=>{const _=(C,I,p)=>{for(const n of C){const b=[...p,n.name];if(n.id===I)return b;if(n.children){const h=_(n.children,I,b);if(h)return h}}return null},y=_(z.value,e,[]);return y?y.join("-"):null})(d.value);f?(u.value.areaIds.unshift(d.value),w.value.unshift(f)):E.error("\u8BF7\u5148\u9009\u62E9\u5730\u533A")},M=()=>{u.value={areaIds:[],levelId:"",bizIds:[]}};return G({open:async()=>{c.value=!0,j.value="\u63A5\u5355\u4FE1\u606F"}}),Y(async()=>{z.value=await ve();const f=await Ie({pageNo:1,pageSize:50});A.value=f.list.map(e=>e.name)}),(f,e)=>{const _=ae,y=le,C=te,I=ce,p=re,n=se,b=ue,h=oe,Q=ne,T=de;return o(),q(Q,{title:a(j),modelValue:a(c),"onUpdate:modelValue":e[6]||(e[6]=l=>R(c)?c.value=l:null)},{footer:t(()=>[r(p,{type:"primary",onClick:e[4]||(e[4]=l=>(async()=>{if(k&&await k.value.validate()){x.value=!0;try{const i=u.value;await fe(i),E.success("\u4FEE\u6539\u6210\u529F")}finally{x.value=!1}}})())},{default:t(()=>[v("\u786E\u5B9A")]),_:1}),r(p,{onClick:e[5]||(e[5]=l=>(M(),void(c.value=!1)))},{default:t(()=>[v("\u53D6\u6D88")]),_:1})]),default:t(()=>[a(m)?(o(),V("div",U,[Z((o(),q(h,{ref_key:"orderRef",ref:k,"label-width":"100px",model:a(u),rules:a(J)},{default:t(()=>[r(_,{label:"\u6444\u5F71\u5E08\u7B49\u7EA7",prop:"levelId"},{default:t(()=>[r(he,{modelValue:a(u).levelId,"onUpdate:modelValue":e[0]||(e[0]=l=>a(u).levelId=l),multiple:!1},null,8,["modelValue"])]),_:1}),r(_,{label:"\u670D\u52A1\u533A\u57DF",prop:"areaIds"},{default:t(()=>[g("div",null,[r(C,null,{default:t(()=>[g("div",F,[(o(!0),V(P,null,D(a(w),(l,i)=>(o(),V("div",{class:"scrollbar-demo-item",key:i},[r(y,{color:"#fff",onClick:Fe=>(O=>{ee.confirm("\u786E\u8BA4\u5220\u9664\u5417","\u8B66\u544A").then(async()=>{w.value.splice(O,1),u.value.areaIds.splice(O,1)})})(i)},{default:t(()=>[v(L(l),1)]),_:2},1032,["onClick"])]))),128))])]),_:1}),g("div",N,[r(I,{modelValue:a(d),"onUpdate:modelValue":e[1]||(e[1]=l=>R(d)?d.value=l:null),data:a(z),props:a(ge),"render-after-expand":!0},null,8,["modelValue","data","props"]),r(p,{text:"",type:"primary",onClick:e[2]||(e[2]=l=>K())},{default:t(()=>[v("\u6DFB\u52A0")]),_:1}),v(" "+L(a(d)),1)])])]),_:1}),r(_,{label:"\u670D\u52A1\u8303\u56F4",prop:"bizIds"},{default:t(()=>[g("div",null,[r(b,{modelValue:a(u).bizIds,"onUpdate:modelValue":e[3]||(e[3]=l=>a(u).bizIds=l)},{default:t(()=>[(o(!0),V(P,null,D(a(A),(l,i)=>(o(),q(n,{key:i,value:l,label:l},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])),[[T,a(x)]])])):$("",!0)]),_:1},8,["title","modelValue"])}}}),[["__scopeId","data-v-346cfe7f"]])});export{Ue as __tla,S as default};
