import{d as H,r as v,Q as J,au as N,o as y,c as z,k as A,l as I,w as n,e as P,f as c,m,t as V,F as g,p as B,U as K,a as _,i as O,I as R,M as T,g as W,af as X,z as Y,bI as Z,a3 as k,__tla as aa}from"./index-456ccb5c.js";import{E as ea,__tla as la}from"./el-text-8dddc33f.js";import{c as sa,__tla as ta}from"./property-efc873b2.js";import{u as ua,__tla as ra}from"./useMessage-59021f66.js";let L,oa=Promise.all([(()=>{try{return aa}catch{}})(),(()=>{try{return la}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return ra}catch{}})()]).then(async()=>{L=H({name:"ProductAttributes",__name:"ProductAttributes",props:{propertyList:{type:Array,default:()=>{}}},emits:["success"],setup(U,{emit:E}){const{t:F}=W(),h=ua(),s=v(""),p=v(null),C=J(()=>a=>p.value!==null&&(p.value===a||void 0)),f=v([]),M=a=>{a!=null&&(f.value.some(r=>{var t,i;return((t=r.input)==null?void 0:t.attributes.id)===((i=a.input)==null?void 0:i.attributes.id)})||f.value.push(a))},u=v([]),Q=U;N(()=>Q.propertyList,a=>{a&&(u.value=a)},{deep:!0,immediate:!0});const S=E,x=async(a,r)=>{if(s.value)try{const t=await sa({propertyId:r,name:s.value});u.value[a].values.push({id:t,name:s.value}),h.success(F("common.createSuccess")),S("success",u.value)}catch{h.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}p.value=null,s.value=""};return(a,r)=>{const t=ea,i=X,j=Y,$=Z,q=k;return y(!0),z(g,null,A(_(u),(d,e)=>(y(),I(q,{key:e},{default:n(()=>[P("div",null,[c(t,{class:"mx-1"},{default:n(()=>[m("\u5C5E\u6027\u540D\uFF1A")]),_:1}),c(i,{class:"mx-1",closable:"",type:"success",onClose:l=>(o=>{var b;(b=u.value)==null||b.splice(o,1)})(e)},{default:n(()=>[m(V(d.name),1)]),_:2},1032,["onClose"])]),P("div",null,[c(t,{class:"mx-1"},{default:n(()=>[m("\u5C5E\u6027\u503C\uFF1A")]),_:1}),(y(!0),z(g,null,A(d.values,(l,o)=>(y(),I(i,{key:l.id,class:"mx-1",closable:"",onClose:b=>((D,G)=>{var w;(w=u.value[D].values)==null||w.splice(G,1)})(e,o)},{default:n(()=>[m(V(l.name),1)]),_:2},1032,["onClose"]))),128)),B(c(_(T),{id:`input${e}`,ref_for:!0,ref:M,modelValue:_(s),"onUpdate:modelValue":r[0]||(r[0]=l=>O(s)?s.value=l:null),class:"!w-20",size:"small",onBlur:l=>x(e,d.id),onKeyup:R(l=>x(e,d.id),["enter"])},null,8,["id","modelValue","onBlur","onKeyup"]),[[K,_(C)(e)]]),B(c(j,{class:"button-new-tag ml-1",size:"small",onClick:l=>(async o=>{p.value=o,f.value[o].focus()})(e)},{default:n(()=>[m(" + \u6DFB\u52A0 ")]),_:2},1032,["onClick"]),[[K,!_(C)(e)]])]),c($,{class:"my-10px"})]),_:2},1024))),128)}}})});export{L as _,oa as __tla};
