import{d as q,r as s,b as D,au as M,o as c,l as f,w as u,f as d,m as v,a as l,p as j,i as z,g as R,M as S,x as B,A as E,z as G,D as H,__tla as I}from"./index-e69fb82c.js";import{_ as J,__tla as K}from"./Dialog.vue_vue_type_style_index_0_lang-dccb0a2a.js";import{b as N,e as O,__tla as Q}from"./property-fd3df5c6.js";import{u as T,__tla as W}from"./useMessage-ac7e9ad3.js";let y,X=Promise.all([(()=>{try{return I}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return W}catch{}})()]).then(async()=>{y=q({name:"ProductPropertyForm",__name:"ProductPropertyAddForm",props:{propertyList:{type:Array,default:()=>{}}},setup(h,{expose:b}){const{t:V}=R(),g=T(),t=s(!1),w=s("\u6DFB\u52A0\u5546\u54C1\u5C5E\u6027"),o=s(!1),r=s({name:""}),x=D({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),n=s(),_=s([]),P=h;M(()=>P.propertyList,a=>{a&&(_.value=a)},{deep:!0,immediate:!0}),b({open:async()=>{t.value=!0,A()}});const k=async()=>{if(n&&await n.value.validate()){o.value=!0;try{const a=r.value,e=await N({name:a.name});if(e.length===0){const p=await O(a);_.value.push({id:p,...r.value,values:[]})}else e[0].values===null&&(e[0].values=[]),e[0].values=[],_.value.push(e[0]);g.success(V("common.createSuccess")),t.value=!1}finally{o.value=!1}}},A=()=>{var a;r.value={name:""},(a=n.value)==null||a.resetFields()};return(a,e)=>{const p=S,F=B,C=E,i=G,L=J,U=H;return c(),f(L,{modelValue:l(t),"onUpdate:modelValue":e[2]||(e[2]=m=>z(t)?t.value=m:null),title:l(w)},{footer:u(()=>[d(i,{disabled:l(o),type:"primary",onClick:k},{default:u(()=>[v("\u786E \u5B9A")]),_:1},8,["disabled"]),d(i,{onClick:e[1]||(e[1]=m=>t.value=!1)},{default:u(()=>[v("\u53D6 \u6D88")]),_:1})]),default:u(()=>[j((c(),f(C,{ref_key:"formRef",ref:n,model:l(r),rules:l(x),"label-width":"80px"},{default:u(()=>[d(F,{label:"\u5C5E\u6027\u540D\u79F0",prop:"name"},{default:u(()=>[d(p,{modelValue:l(r).name,"onUpdate:modelValue":e[0]||(e[0]=m=>l(r).name=m),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[U,l(o)]])]),_:1},8,["modelValue","title"])}}})});export{y as _,X as __tla};
