import{al as m,d as B,g as G,r as c,o as v,l as V,w as d,f as t,a,m as x,p as H,c as S,F as g,k as R,i as J,M as K,x as O,y as Q,q as W,v as X,bA as Z,A as $,z as ee,D as le,__tla as ae}from"./index-c0a26e5e.js";import{_ as oe,__tla as te}from"./Dialog.vue_vue_type_style_index_0_lang-a2d2167b.js";import{e as de,D as re,__tla as ue}from"./dict-70292bde.js";import{g as se,__tla as ce}from"./index-1f9d1788.js";import{u as ie,__tla as ne}from"./useMessage-3978ad3b.js";let C,D,E,F,pe=Promise.all([(()=>{try{return ae}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return ue}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return ne}catch{}})()]).then(async()=>{F=async i=>await m.get({url:"/crm/receivable/page",params:i}),D=async i=>await m.delete({url:"/crm/receivable/delete?id="+i}),E=async i=>await m.download({url:"/crm/receivable/export-excel",params:i}),C=B({__name:"ReceivableForm",emits:["success"],setup(i,{expose:j,emit:A}){const{t:f}=G(),y=ie(),I=c([]),n=c(!1),h=c(""),p=c(!1),w=c(""),o=c({id:void 0,no:void 0,planId:void 0,customerId:void 0,contractId:void 0,checkStatus:void 0,processInstanceId:void 0,returnTime:void 0,returnType:void 0,price:void 0,ownerUserId:void 0,batchId:void 0,sort:void 0,dataScope:void 0,dataScopeDeptIds:void 0,status:void 0,remark:void 0}),_=c();j({open:async(u,e)=>{if(n.value=!0,h.value=f("action."+u),w.value=u,P(),e){p.value=!0;try{o.value=await(async s=>await m.get({url:"/crm/receivable/get?id="+s}))(e)}finally{p.value=!1}}I.value=await se()}});const M=A,N=async()=>{if(_&&await _.value.validate()){p.value=!0;try{const u=o.value;w.value==="create"?(await(async e=>await m.post({url:"/crm/receivable/create",data:e}))(u),y.success(f("common.createSuccess"))):(await(async e=>await m.put({url:"/crm/receivable/update",data:e}))(u),y.success(f("common.updateSuccess"))),n.value=!1,M("success")}finally{p.value=!1}}},P=()=>{var u;o.value={id:void 0,no:void 0,planId:void 0,customerId:void 0,contractId:void 0,checkStatus:void 0,processInstanceId:void 0,returnTime:void 0,returnType:void 0,price:void 0,ownerUserId:void 0,batchId:void 0,sort:void 0,dataScope:void 0,dataScopeDeptIds:void 0,status:void 0,remark:void 0},(u=_.value)==null||u.resetFields()};return(u,e)=>{const s=K,r=O,q=Q,U=W,k=X,b=Z,z=$,T=ee,Y=oe,L=le;return v(),V(Y,{title:a(h),modelValue:a(n),"onUpdate:modelValue":e[12]||(e[12]=l=>J(n)?n.value=l:null)},{footer:d(()=>[t(T,{onClick:N,type:"primary",disabled:a(p)},{default:d(()=>[x("\u786E \u5B9A")]),_:1},8,["disabled"]),t(T,{onClick:e[11]||(e[11]=l=>n.value=!1)},{default:d(()=>[x("\u53D6 \u6D88")]),_:1})]),default:d(()=>[H((v(),V(z,{ref_key:"formRef",ref:_,model:a(o),rules:u.formRules,"label-width":"100px"},{default:d(()=>[t(r,{label:"\u56DE\u6B3E\u7F16\u53F7",prop:"no"},{default:d(()=>[t(s,{modelValue:a(o).no,"onUpdate:modelValue":e[0]||(e[0]=l=>a(o).no=l),placeholder:"\u8BF7\u8F93\u5165\u56DE\u6B3E\u7F16\u53F7"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u56DE\u6B3E\u8BA1\u5212",prop:"planId"},{default:d(()=>[t(s,{modelValue:a(o).planId,"onUpdate:modelValue":e[1]||(e[1]=l=>a(o).planId=l),placeholder:"\u8BF7\u8F93\u5165\u56DE\u6B3E\u8BA1\u5212"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5BA2\u6237\u540D\u79F0",prop:"customerId"},{default:d(()=>[t(s,{modelValue:a(o).customerId,"onUpdate:modelValue":e[2]||(e[2]=l=>a(o).customerId=l),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5408\u540C\u540D\u79F0",prop:"contractId"},{default:d(()=>[t(s,{modelValue:a(o).contractId,"onUpdate:modelValue":e[3]||(e[3]=l=>a(o).contractId=l),placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u56DE\u6B3E\u65E5\u671F",prop:"returnTime"},{default:d(()=>[t(q,{modelValue:a(o).returnTime,"onUpdate:modelValue":e[4]||(e[4]=l=>a(o).returnTime=l),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u56DE\u6B3E\u65E5\u671F"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u56DE\u6B3E\u65B9\u5F0F",prop:"returnType"},{default:d(()=>[t(k,{modelValue:a(o).returnType,"onUpdate:modelValue":e[5]||(e[5]=l=>a(o).returnType=l),placeholder:"\u8BF7\u9009\u62E9\u56DE\u6B3E\u65B9\u5F0F"},{default:d(()=>[(v(!0),S(g,null,R(a(de)(a(re).CRM_RETURN_TYPE),l=>(v(),V(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u56DE\u6B3E\u91D1\u989D",prop:"price"},{default:d(()=>[t(b,{modelValue:a(o).price,"onUpdate:modelValue":e[6]||(e[6]=l=>a(o).price=l),placeholder:"\u8BF7\u8F93\u5165\u56DE\u6B3E\u91D1\u989D"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:d(()=>[t(k,{modelValue:a(o).ownerUserId,"onUpdate:modelValue":e[7]||(e[7]=l=>a(o).ownerUserId=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA"},{default:d(()=>[(v(!0),S(g,null,R(a(I),l=>(v(),V(U,{key:l.id,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u6279\u6B21",prop:"batchId"},{default:d(()=>[t(b,{modelValue:a(o).batchId,"onUpdate:modelValue":e[8]||(e[8]=l=>a(o).batchId=l),placeholder:"\u8BF7\u8F93\u5165\u6279\u6B21"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u663E\u793A\u6392\u5E8F",prop:"sort"},{default:d(()=>[t(b,{modelValue:a(o).sort,"onUpdate:modelValue":e[9]||(e[9]=l=>a(o).sort=l),min:0,"controls-position":"right"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5907\u6CE8",prop:"remark"},{default:d(()=>[t(s,{type:"textarea",rows:3,modelValue:a(o).remark,"onUpdate:modelValue":e[10]||(e[10]=l=>a(o).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[L,a(p)]])]),_:1},8,["title","modelValue"])}}})});export{C as _,pe as __tla,D as d,E as e,F as g};
