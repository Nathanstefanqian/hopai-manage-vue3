import{d as H,r as n,A as J,l as Y,f as K,o,q as i,w as t,i as d,a,j as _,B as Q,c as y,F as b,k as T,t as f,g as A,a3 as W,x as X,T as Z,D as $,G as ee,ag as ae,af as le,M as te,C as re,I as de,H as oe,L as se,__tla as ue}from"./index-438cb142.js";import{_ as ne,__tla as ie}from"./Dialog.vue_vue_type_style_index_0_lang-cf80572b.js";import{h as pe,__tla as me}from"./spu-7e53fdff.js";import{a as O,D as x,__tla as ce}from"./dict-3f0c5214.js";import{i as _e,h as P,C as fe}from"./constants-3cc050b6.js";import{u as ve,__tla as ye}from"./useMessage-a65b1a59.js";let C,be=Promise.all([(()=>{try{return ue}catch{}})(),(()=>{try{return ie}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return ye}catch{}})()]).then(async()=>{let g,V;g={style:{float:"left"}},V={style:{float:"right","font-size":"13px",color:"#8492a6"}},C=H({name:"ProductBrandForm",__name:"RewardForm",emits:["success"],setup(Te,{expose:q,emit:ge}){const h=n([]);J(()=>{pe().then(s=>{h.value=s})});const{t:v}=Y(),w=ve(),p=n(!1),S=n(""),m=n(!1),D=n(""),r=n({id:void 0,name:void 0,startAndEndTime:void 0,startTime:void 0,endTime:void 0,conditionType:_e.PRICE.type,remark:void 0,productScope:P.ALL.scope,productSpuIds:void 0,rules:void 0}),N=K({name:[{required:!0,message:"\u6D3B\u52A8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],startAndEndTime:[{required:!0,message:"\u6D3B\u52A8\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],conditionType:[{required:!0,message:"\u6761\u4EF6\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],productScope:[{required:!0,message:"\u5546\u54C1\u8303\u56F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],productSpuIds:[{required:!0,message:"\u5546\u54C1\u8303\u56F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=n();q({open:async(s,l)=>{if(p.value=!0,S.value=v("action."+s),D.value=s,F(),l){m.value=!0;try{r.value={conditionType:10,description:"",id:void 0,name:"\u6D4B\u8BD5\u6D3B\u52A8",picUrl:"",productScope:2,productSpuIds:[634],remark:"\u6D4B\u8BD5\u5907\u6CE8",startAndEndTime:[new Date,new Date("2023-12-31")],status:0}}finally{m.value=!1}}}});const R=async()=>{c&&await c.value.validate()&&w.success("\u5DF2\u5728\u63A7\u5236\u53F0\u6253\u5370\u6570\u636E")},F=()=>{var s;r.value={id:void 0,name:"",picUrl:"",status:fe.ENABLE,description:""},(s=c.value)==null||s.resetFields()};return(s,l)=>{const I=Z,u=$,L=ee,k=ae,E=le,z=te,B=re,M=de,U=oe,j=ne,G=se;return o(),i(j,{title:a(S),modelValue:a(p),"onUpdate:modelValue":l[7]||(l[7]=e=>X(p)?p.value=e:null)},{footer:t(()=>[d(U,{onClick:R,type:"primary",disabled:a(m)},{default:t(()=>[_("\u786E \u5B9A")]),_:1},8,["disabled"]),d(U,{onClick:l[6]||(l[6]=e=>p.value=!1)},{default:t(()=>[_("\u53D6 \u6D88")]),_:1})]),default:t(()=>[Q((o(),i(M,{ref_key:"formRef",ref:c,model:a(r),rules:a(N),"label-width":"80px"},{default:t(()=>[d(u,{label:"\u6D3B\u52A8\u540D\u79F0",prop:"name"},{default:t(()=>[d(I,{modelValue:a(r).name,"onUpdate:modelValue":l[0]||(l[0]=e=>a(r).name=e),placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),d(u,{label:"\u6D3B\u52A8\u65F6\u95F4",prop:"startAndEndTime"},{default:t(()=>[d(L,{modelValue:a(r).startAndEndTime,"onUpdate:modelValue":l[1]||(l[1]=e=>a(r).startAndEndTime=e),type:"datetimerange","range-separator":"-","start-placeholder":a(v)("common.startTimeText"),"end-placeholder":a(v)("common.endTimeText")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1}),d(u,{label:"\u6761\u4EF6\u7C7B\u578B",prop:"conditionType"},{default:t(()=>[d(E,{modelValue:a(r).conditionType,"onUpdate:modelValue":l[2]||(l[2]=e=>a(r).conditionType=e)},{default:t(()=>[(o(!0),y(b,null,T(a(O)(a(x).PROMOTION_CONDITION_TYPE),e=>(o(),i(k,{key:e.value,label:parseInt(e.value)},{default:t(()=>[_(f(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(u,{label:"\u4F18\u60E0\u8BBE\u7F6E"}),d(u,{label:"\u6D3B\u52A8\u5546\u54C1",prop:"productScope"},{default:t(()=>[d(E,{modelValue:a(r).productScope,"onUpdate:modelValue":l[3]||(l[3]=e=>a(r).productScope=e)},{default:t(()=>[(o(!0),y(b,null,T(a(O)(a(x).PROMOTION_PRODUCT_SCOPE),e=>(o(),i(k,{key:e.value,label:parseInt(e.value)},{default:t(()=>[_(f(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r).productScope===a(P).SPU.scope?(o(),i(u,{key:0,prop:"productSpuIds"},{default:t(()=>[d(B,{modelValue:a(r).productSpuIds,"onUpdate:modelValue":l[4]||(l[4]=e=>a(r).productSpuIds=e),placeholder:"\u8BF7\u9009\u62E9\u6D3B\u52A8\u5546\u54C1",clearable:"",size:"small",multiple:"",filterable:"",style:{width:"400px"}},{default:t(()=>[(o(!0),y(b,null,T(a(h),e=>(o(),i(z,{key:e.id,label:e.name,value:e.id},{default:t(()=>[A("span",g,f(e.name),1),A("span",V,"\uFFE5"+f((e.price/100).toFixed(2)),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):W("",!0),d(u,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[d(I,{modelValue:a(r).remark,"onUpdate:modelValue":l[5]||(l[5]=e=>a(r).remark=e),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[G,a(m)]])]),_:1},8,["title","modelValue"])}}})});export{C as _,be as __tla};
