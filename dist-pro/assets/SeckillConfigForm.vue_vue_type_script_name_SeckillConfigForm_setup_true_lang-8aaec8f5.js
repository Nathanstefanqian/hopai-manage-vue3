import{f as P,d as g,l as j,r as i,o as x,q as M,w as u,i as f,a as o,j as T,B as V,x as R,H as E,L as O,__tla as q}from"./index-0d81347e.js";import{_ as A,__tla as B}from"./Dialog.vue_vue_type_style_index_0_lang-9d93c798.js";import{_ as D,__tla as I}from"./Form-b7197232.js";import{a as L,c as N,u as z,__tla as G}from"./seckillConfig-6150dfb9.js";import{d as J,__tla as K}from"./formatTime-c18eac7a.js";import{r as m,__tla as Q}from"./formRules-ad0bc375.js";import{D as W,__tla as X}from"./dict-d9e0d1ac.js";import{u as Y,__tla as Z}from"./useCrudSchemas-911286a8.js";import{u as $,__tla as ee}from"./useMessage-da459548.js";let U,d,ae=Promise.all([(()=>{try{return q}catch{}})(),(()=>{try{return B}catch{}})(),(()=>{try{return I}catch{}})(),(()=>{try{return G}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return ee}catch{}})()]).then(async()=>{let p,h;p=P({name:[m],startTime:[m],endTime:[m],picUrl:[m],status:[m]}),h=P([{label:"\u79D2\u6740\u65F6\u6BB5\u540D\u79F0",field:"name",isSearch:!0},{label:"\u5F00\u59CB\u65F6\u95F4\u70B9",field:"startTime",isSearch:!1,search:{component:"TimePicker"},form:{component:"TimePicker",componentProps:{valueFormat:"HH:mm:ss"}}},{label:"\u7ED3\u675F\u65F6\u95F4\u70B9",field:"endTime",isSearch:!1,search:{component:"TimePicker"},form:{component:"TimePicker",componentProps:{valueFormat:"HH:mm:ss"}}},{label:"\u79D2\u6740\u8F6E\u64AD\u56FE",field:"sliderPicUrls",isSearch:!1,form:{component:"UploadImgs"},table:{width:300}},{label:"\u72B6\u6001",field:"status",dictType:W.COMMON_STATUS,dictClass:"number",isSearch:!0,form:{component:"Radio"}},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,isSearch:!1,formatter:J},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:d}=Y(h),U=g({__name:"SeckillConfigForm",emits:["success"],setup(te,{expose:k,emit:w}){const{t:_}=j(),y=$(),l=i(!1),v=i(""),r=i(!1),b=i(""),s=i();k({open:async(t,e)=>{var a;if(l.value=!0,v.value=_("action."+t),b.value=t,e){r.value=!0;try{const c=await L(e);c.sliderPicUrls=(a=c.sliderPicUrls)==null?void 0:a.map(n=>({url:n})),s.value.setValues(c)}finally{r.value=!1}}}});const C=w,F=async()=>{if(s&&await s.value.getElFormRef().validate()){r.value=!0;try{const t=[];s.value.formModel.sliderPicUrls.forEach(a=>{typeof a=="object"?t.push(a.url):t.push(a)});const e={...s.value.formModel,sliderPicUrls:t};b.value==="create"?(await N(e),y.success(_("common.createSuccess"))):(await z(e),y.success(_("common.updateSuccess"))),l.value=!1,C("success")}finally{r.value=!1}}};return(t,e)=>{const a=D,c=E,n=A,H=O;return x(),M(n,{modelValue:o(l),"onUpdate:modelValue":e[1]||(e[1]=S=>R(l)?l.value=S:null),title:o(v)},{footer:u(()=>[f(c,{disabled:o(r),type:"primary",onClick:F},{default:u(()=>[T("\u786E \u5B9A")]),_:1},8,["disabled"]),f(c,{onClick:e[0]||(e[0]=S=>l.value=!1)},{default:u(()=>[T("\u53D6 \u6D88")]),_:1})]),default:u(()=>[V(f(a,{ref_key:"formRef",ref:s,rules:o(p),schema:o(d).formSchema},null,8,["rules","schema"]),[[H,o(r)]])]),_:1},8,["modelValue","title"])}}})});export{U as _,ae as __tla,d as a};
