import{aE as F,b_ as O,bA as D,C as _,b as C,al as A,d as M,M as I,ak as G,ax as $,bs as J,b$ as S,bw as w,bl as Q,be as R,c0 as U,r as q,f as j,A as X,h as H,aI as Y,__tla as Z}from"./index-0d81347e.js";let z,ee=Promise.all([(()=>{try{return Z}catch{}})()]).then(async()=>{const B=M({extends:I,setup(e,n){const d=I.setup(e,n);delete d.selectOptionClick;const i=G().proxy;return A(()=>{d.select.cachedOptions.get(i.value)||d.select.onOptionCreate(i)}),d},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function E(e){return e||e===0}function V(e){return Array.isArray(e)&&e.length}function m(e){return Array.isArray(e)?e:E(e)?[e]:[]}function g(e,n,d,i,c){for(let s=0;s<e.length;s++){const h=e[s];if(n(h,s,e,c))return i?i(h,s,e,c):h;{const y=d(h);if(V(y)){const a=g(y,n,d,i,h);if(a)return a}}}}function L(e,n,d,i){for(let c=0;c<e.length;c++){const s=e[c];n(s,c,e,i);const h=d(s);V(h)&&L(h,n,d,s)}}const P=(e,{attrs:n,slots:d,emit:i},{select:c,tree:s,key:h})=>{$(()=>e.modelValue,()=>{e.showCheckbox&&A(()=>{const l=s.value;l&&!J(l.getCheckedKeys(),m(e.modelValue))&&l.setCheckedKeys(m(e.modelValue))})},{immediate:!0,deep:!0});const y=C(()=>({value:h.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),a=(l,t)=>{var r;const o=y.value[l];return Q(o)?o(t,(r=s.value)==null?void 0:r.getNode(a("value",t))):t[o]},N=m(e.modelValue).map(l=>g(e.data||[],t=>a("value",t)===l,t=>a("children",t),(t,r,o,v)=>v&&a("value",v))).filter(l=>E(l)),b=C(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const l=[];return L(e.data.concat(e.cacheData),t=>{const r=a("value",t);l.push({value:r,currentLabel:a("label",t),isDisabled:a("disabled",t)})},t=>a("children",t)),l}),f=C(()=>b.value.reduce((l,t)=>({...l,[t.value]:t}),{}));return{...O(D(e),Object.keys(S.props)),...n,nodeKey:h,expandOnClickNode:C(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:C(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(N):N),renderContent:(l,{node:t,data:r,store:o})=>l(B,{value:a("value",r),label:a("label",r),disabled:a("disabled",r)},e.renderContent?()=>e.renderContent(l,{node:t,data:r,store:o}):d.default?()=>d.default({node:t,data:r,store:o}):void 0),filterNodeMethod:(l,t,r)=>{var o;return e.filterNodeMethod?e.filterNodeMethod(l,t,r):!l||((o=a("label",t))==null?void 0:o.includes(l))},onNodeClick:(l,t,r)=>{var o,v,p;if((o=n.onNodeClick)==null||o.call(n,l,t,r),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!t.isLeaf)e.expandOnClickNode&&r.proxy.handleExpandIconClick();else if(!a("disabled",l)){const u=(v=c.value)==null?void 0:v.options.get(a("value",l));(p=c.value)==null||p.handleOptionSelect(u)}}},onCheck:(l,t)=>{if(!e.showCheckbox)return;const r=a("value",l),o=t.checkedKeys,v=e.multiple?m(e.modelValue).filter(u=>u in f.value&&!s.value.getNode(u)&&!o.includes(u)):[],p=o.concat(v);if(e.checkStrictly)i(w,e.multiple?p:p.includes(r)?r:void 0);else if(e.multiple)i(w,s.value.getCheckedKeys(!0));else{const u=g([l],k=>!V(a("children",k))&&!a("disabled",k),k=>a("children",k)),x=u?a("value",u):void 0,W=E(e.modelValue)&&!!g([l],k=>a("value",k)===e.modelValue,k=>a("children",k));i(w,x===e.modelValue||W?void 0:x)}A(()=>{var u;const x=m(e.modelValue);s.value.setCheckedKeys(x),(u=n.onCheck)==null||u.call(n,l,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})})},cacheOptions:b}};var T=M({props:{data:{type:Array,default:()=>[]}},setup(e){const n=R(U);return $(()=>e.data,()=>{var d;e.data.forEach(c=>{n.cachedOptions.has(c.value)||n.cachedOptions.set(c.value,c)});const i=((d=n.selectWrapper)==null?void 0:d.querySelectorAll("input"))||[];Array.from(i).includes(document.activeElement)||n.setSelected()},{flush:"post",immediate:!0}),()=>{}}}),K=Y(M({name:"ElTreeSelect",inheritAttrs:!1,props:{..._.props,...S.props,cacheData:{type:Array,default:()=>[]}},setup(e,n){const{slots:d,expose:i}=n,c=q(),s=q(),h=C(()=>e.nodeKey||e.valueKey||"value"),y=((f,{attrs:l},{tree:t,key:r})=>{const o=F("tree-select"),v={...O(D(f),Object.keys(_.props)),...l,valueKey:r,popperClass:C(()=>{const p=[o.e("popper")];return f.popperClass&&p.push(f.popperClass),p.join(" ")}),filterMethod:(p="")=>{f.filterMethod&&f.filterMethod(p),A(()=>{var u;(u=t.value)==null||u.filter(p)})},onVisibleChange:p=>{var u;(u=l.onVisibleChange)==null||u.call(l,p),f.filterable&&p&&v.filterMethod()}};return v})(e,n,{select:c,tree:s,key:h}),{cacheOptions:a,...N}=P(e,n,{select:c,tree:s,key:h}),b=j({});return i(b),X(()=>{Object.assign(b,{...O(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...O(c.value,["focus","blur"])})}),()=>H(_,j({...y,ref:f=>c.value=f}),{...d,default:()=>[H(T,{data:a.value}),H(S,j({...N,ref:f=>s.value=f}))]})}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);K.install=e=>{e.component(K.name,K)},z=K});export{z as E,ee as __tla};
