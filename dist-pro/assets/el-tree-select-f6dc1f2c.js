import{aD as W,bX as O,bu as L,v as _,Q as y,ai as A,d as M,q,ag as X,au as z,bl as Y,bY as S,bp as j,be as Z,b7 as $,bZ as G,r as B,b as w,j as J,aH as H,aF as R,__tla as U}from"./index-e69fb82c.js";let F,ee=Promise.all([(()=>{try{return U}catch{}})()]).then(async()=>{const I=M({extends:q,setup(e,n){const d=q.setup(e,n);delete d.selectOptionClick;const i=X().proxy;return A(()=>{d.select.cachedOptions.get(i.value)||d.select.onOptionCreate(i)}),d},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function V(e){return e||e===0}function E(e){return Array.isArray(e)&&e.length}function b(e){return Array.isArray(e)?e:V(e)?[e]:[]}function g(e,n,d,i,c){for(let s=0;s<e.length;s++){const h=e[s];if(n(h,s,e,c))return i?i(h,s,e,c):h;{const C=d(h);if(E(C)){const a=g(C,n,d,i,h);if(a)return a}}}}function D(e,n,d,i){for(let c=0;c<e.length;c++){const s=e[c];n(s,c,e,i);const h=d(s);E(h)&&D(h,n,d,s)}}const P=(e,{attrs:n,slots:d,emit:i},{select:c,tree:s,key:h})=>{z(()=>e.modelValue,()=>{e.showCheckbox&&A(()=>{const l=s.value;l&&!Y(l.getCheckedKeys(),b(e.modelValue))&&l.setCheckedKeys(b(e.modelValue))})},{immediate:!0,deep:!0});const C=y(()=>({value:h.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),a=(l,t)=>{var r;const o=C.value[l];return Z(o)?o(t,(r=s.value)==null?void 0:r.getNode(a("value",t))):t[o]},N=b(e.modelValue).map(l=>g(e.data||[],t=>a("value",t)===l,t=>a("children",t),(t,r,o,v)=>v&&a("value",v))).filter(l=>V(l)),m=y(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const l=[];return D(e.data.concat(e.cacheData),t=>{const r=a("value",t);l.push({value:r,currentLabel:a("label",t),isDisabled:a("disabled",t)})},t=>a("children",t)),l}),f=y(()=>m.value.reduce((l,t)=>({...l,[t.value]:t}),{}));return{...O(L(e),Object.keys(S.props)),...n,nodeKey:h,expandOnClickNode:y(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:y(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(N):N),renderContent:(l,{node:t,data:r,store:o})=>l(I,{value:a("value",r),label:a("label",r),disabled:a("disabled",r)},e.renderContent?()=>e.renderContent(l,{node:t,data:r,store:o}):d.default?()=>d.default({node:t,data:r,store:o}):void 0),filterNodeMethod:(l,t,r)=>{var o;return e.filterNodeMethod?e.filterNodeMethod(l,t,r):!l||((o=a("label",t))==null?void 0:o.includes(l))},onNodeClick:(l,t,r)=>{var o,v,p;if((o=n.onNodeClick)==null||o.call(n,l,t,r),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!t.isLeaf)e.expandOnClickNode&&r.proxy.handleExpandIconClick();else if(!a("disabled",l)){const u=(v=c.value)==null?void 0:v.options.get(a("value",l));(p=c.value)==null||p.handleOptionSelect(u)}}},onCheck:(l,t)=>{if(!e.showCheckbox)return;const r=a("value",l),o=t.checkedKeys,v=e.multiple?b(e.modelValue).filter(u=>u in f.value&&!s.value.getNode(u)&&!o.includes(u)):[],p=o.concat(v);if(e.checkStrictly)i(j,e.multiple?p:p.includes(r)?r:void 0);else if(e.multiple)i(j,s.value.getCheckedKeys(!0));else{const u=g([l],k=>!E(a("children",k))&&!a("disabled",k),k=>a("children",k)),x=u?a("value",u):void 0,T=V(e.modelValue)&&!!g([l],k=>a("value",k)===e.modelValue,k=>a("children",k));i(j,x===e.modelValue||T?void 0:x)}A(()=>{var u;const x=b(e.modelValue);s.value.setCheckedKeys(x),(u=n.onCheck)==null||u.call(n,l,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})})},cacheOptions:m}};var Q=M({props:{data:{type:Array,default:()=>[]}},setup(e){const n=$(G);return z(()=>e.data,()=>{var d;e.data.forEach(c=>{n.cachedOptions.has(c.value)||n.cachedOptions.set(c.value,c)});const i=((d=n.selectWrapper)==null?void 0:d.querySelectorAll("input"))||[];Array.from(i).includes(document.activeElement)||n.setSelected()},{flush:"post",immediate:!0}),()=>{}}}),K=R(M({name:"ElTreeSelect",inheritAttrs:!1,props:{..._.props,...S.props,cacheData:{type:Array,default:()=>[]}},setup(e,n){const{slots:d,expose:i}=n,c=B(),s=B(),h=y(()=>e.nodeKey||e.valueKey||"value"),C=((f,{attrs:l},{tree:t,key:r})=>{const o=W("tree-select"),v={...O(L(f),Object.keys(_.props)),...l,valueKey:r,popperClass:y(()=>{const p=[o.e("popper")];return f.popperClass&&p.push(f.popperClass),p.join(" ")}),filterMethod:(p="")=>{f.filterMethod&&f.filterMethod(p),A(()=>{var u;(u=t.value)==null||u.filter(p)})},onVisibleChange:p=>{var u;(u=l.onVisibleChange)==null||u.call(l,p),f.filterable&&p&&v.filterMethod()}};return v})(e,n,{select:c,tree:s,key:h}),{cacheOptions:a,...N}=P(e,n,{select:c,tree:s,key:h}),m=w({});return i(m),J(()=>{Object.assign(m,{...O(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...O(c.value,["focus","blur"])})}),()=>H(_,w({...C,ref:f=>c.value=f}),{...d,default:()=>[H(Q,{data:a.value}),H(S,w({...N,ref:f=>s.value=f}))]})}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);K.install=e=>{e.component(K.name,K)},F=K});export{F as E,ee as __tla};
