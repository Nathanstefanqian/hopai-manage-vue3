import{d as re,u as oe,r as _,b as ue,au as de,j as pe,H as se,o as u,c as i,f as l,w as t,a,F as n,k as y,l as d,V as w,I as _e,p as C,U as ie,m as b,e as ne,q as ce,v as me,x as ye,y as ve,M as fe,_ as be,z as he,A as ke,C as Ve,D as Ue,__tla as we}from"./index-c0a26e5e.js";import{_ as Ce,__tla as Te}from"./index.vue_vue_type_script_setup_true_lang-0de4d2db.js";import{E as ge,a as Ee,b as xe,__tla as Ie}from"./el-dropdown-item-f9cb4597.js";import{_ as Pe,__tla as De}from"./ContentWrap.vue_vue_type_script_setup_true_lang-a51830eb.js";import{_ as Se,__tla as Re}from"./OrderDeliveryForm.vue_vue_type_script_setup_true_lang-f0887234.js";import{_ as qe,__tla as Ne}from"./OrderUpdateRemarkForm.vue_vue_type_script_setup_true_lang-3d3ba5e5.js";import{f as Ae,__tla as Ye}from"./index-98115ea0.js";import{a as Fe,__tla as Oe}from"./index-2129803f.js";import{a as T,D as k,e as ze,__tla as Le}from"./dict-70292bde.js";import{g as Me,__tla as He}from"./index-7284f3c0.js";import{D as g,T as Ke}from"./constants-03dd36f5.js";import je,{__tla as Be}from"./OrderTableColumn-20ef9ad5.js";import{__tla as Xe}from"./index-e28dd7ca.js";import{__tla as Ge}from"./el-card-870e9bf2.js";import{__tla as Je}from"./Dialog.vue_vue_type_style_index_0_lang-a2d2167b.js";import{__tla as Qe}from"./useMessage-3978ad3b.js";import{__tla as We}from"./el-image-bc627c23.js";import{__tla as Ze}from"./el-image-viewer-5eb59d31.js";import{__tla as $e}from"./DictTag.vue_vue_type_script_lang-c5fd5bf4.js";import"./color-a8b4eb58.js";import{__tla as ea}from"./formatTime-a91ab062.js";import{__tla as aa}from"./index-5f0d8cbf.js";import{__tla as la}from"./ImageViewer.vue_vue_type_script_setup_true_lang-e83d8d3b.js";import"./_plugin-vue_export-helper-1b428a4d.js";let B,ta=Promise.all([(()=>{try{return we}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return De}catch{}})(),(()=>{try{return Re}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return Oe}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return He}catch{}})(),(()=>{try{return Be}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return Ge}catch{}})(),(()=>{try{return Je}catch{}})(),(()=>{try{return Qe}catch{}})(),(()=>{try{return We}catch{}})(),(()=>{try{return Ze}catch{}})(),(()=>{try{return $e}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return la}catch{}})()]).then(async()=>{let D;D={class:"flex items-center justify-center"},B=re({name:"TradeOrder",__name:"index",setup(ra){const{currentRoute:X,push:G}=oe(),E=_(!0),S=_(2),x=_([]),R=_(),r=_({pageNo:1,pageSize:10,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0}),h=ue({queryParam:""}),q=_([{value:"no",label:"\u8BA2\u5355\u53F7"},{value:"userId",label:"\u7528\u6237UID"},{value:"userNickname",label:"\u7528\u6237\u6635\u79F0"},{value:"userMobile",label:"\u7528\u6237\u7535\u8BDD"}]),J=c=>{var o;(o=q.value.filter(p=>p.value!==c))==null||o.forEach(p=>{r.value.hasOwnProperty(p.value)&&delete r.value[p.value]})},v=async()=>{E.value=!0;try{const c=await Ae(a(r));x.value=c.list,S.value=c.total}finally{E.value=!1}},I=async()=>{r.value.pageNo=1,await v()},Q=()=>{var c;(c=R.value)==null||c.resetFields(),r.value={pageNo:1,pageSize:10,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0},I()},N=_(),A=_();de(()=>X.value,()=>{v()});const P=_([]),Y=_([]);return pe(async()=>{await v(),P.value=await Fe(),Y.value=await Me()}),(c,o)=>{const p=ce,m=me,s=ye,W=ve,F=fe,f=be,V=he,Z=ke,O=Pe,z=ge,$=Ee,ee=xe,ae=Ve,le=Ce,L=se("hasPermi"),te=Ue;return u(),i(n,null,[l(O,null,{default:t(()=>[l(Z,{ref_key:"queryFormRef",ref:R,inline:!0,model:a(r),class:"-mb-15px","label-width":"68px"},{default:t(()=>[l(s,{label:"\u8BA2\u5355\u72B6\u6001",prop:"status"},{default:t(()=>[l(m,{modelValue:a(r).status,"onUpdate:modelValue":o[0]||(o[0]=e=>a(r).status=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(T)(a(k).TRADE_ORDER_STATUS),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u652F\u4ED8\u65B9\u5F0F",prop:"payChannelCode"},{default:t(()=>[l(m,{modelValue:a(r).payChannelCode,"onUpdate:modelValue":o[1]||(o[1]=e=>a(r).payChannelCode=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(ze)(a(k).PAY_CHANNEL_CODE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[l(W,{modelValue:a(r).createTime,"onUpdate:modelValue":o[2]||(o[2]=e=>a(r).createTime=e),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-280px","end-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4","start-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),l(s,{label:"\u8BA2\u5355\u6765\u6E90",prop:"terminal"},{default:t(()=>[l(m,{modelValue:a(r).terminal,"onUpdate:modelValue":o[3]||(o[3]=e=>a(r).terminal=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(T)(a(k).TERMINAL),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u8BA2\u5355\u7C7B\u578B",prop:"type"},{default:t(()=>[l(m,{modelValue:a(r).type,"onUpdate:modelValue":o[4]||(o[4]=e=>a(r).type=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(T)(a(k).TRADE_ORDER_TYPE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u914D\u9001\u65B9\u5F0F",prop:"deliveryType"},{default:t(()=>[l(m,{modelValue:a(r).deliveryType,"onUpdate:modelValue":o[5]||(o[5]=e=>a(r).deliveryType=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(T)(a(k).TRADE_DELIVERY_TYPE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r).deliveryType===a(g).EXPRESS.type?(u(),d(s,{key:0,label:"\u5FEB\u9012\u516C\u53F8",prop:"logisticsId"},{default:t(()=>[l(m,{modelValue:a(r).logisticsId,"onUpdate:modelValue":o[6]||(o[6]=e=>a(r).logisticsId=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(Y),e=>(u(),d(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):w("",!0),a(r).deliveryType===a(g).PICK_UP.type?(u(),d(s,{key:1,label:"\u81EA\u63D0\u95E8\u5E97",prop:"pickUpStoreId"},{default:t(()=>[l(m,{modelValue:a(r).pickUpStoreId,"onUpdate:modelValue":o[7]||(o[7]=e=>a(r).pickUpStoreId=e),class:"!w-280px",clearable:"",multiple:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),i(n,null,y(a(P),e=>(u(),d(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):w("",!0),a(r).deliveryType===a(g).PICK_UP.type?(u(),d(s,{key:2,label:"\u6838\u9500\u7801",prop:"pickUpVerifyCode"},{default:t(()=>[l(F,{modelValue:a(r).pickUpVerifyCode,"onUpdate:modelValue":o[8]||(o[8]=e=>a(r).pickUpVerifyCode=e),class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u81EA\u63D0\u6838\u9500\u7801",onKeyup:_e(I,["enter"])},null,8,["modelValue","onKeyup"])]),_:1})):w("",!0),l(s,{label:"\u805A\u5408\u641C\u7D22"},{default:t(()=>[C(l(F,{modelValue:a(r)[a(h).queryParam],"onUpdate:modelValue":o[10]||(o[10]=e=>a(r)[a(h).queryParam]=e),type:a(h).queryParam==="userId"?"number":"text",class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165"},{prepend:t(()=>[l(m,{modelValue:a(h).queryParam,"onUpdate:modelValue":o[9]||(o[9]=e=>a(h).queryParam=e),class:"!w-110px",clearable:"",placeholder:"\u5168\u90E8",onChange:J},{default:t(()=>[(u(!0),i(n,null,y(a(q),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","type"]),[[ie,!0]])]),_:1}),l(s,null,{default:t(()=>[l(V,{onClick:I},{default:t(()=>[l(f,{class:"mr-5px",icon:"ep:search"}),b(" \u641C\u7D22 ")]),_:1}),l(V,{onClick:Q},{default:t(()=>[l(f,{class:"mr-5px",icon:"ep:refresh"}),b(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(O,null,{default:t(()=>[C((u(),d(ae,{data:a(x),"row-key":"id"},{default:t(()=>[l(a(je),{list:a(x),"pick-up-store-list":a(P)},{default:t(({row:e})=>[ne("div",D,[C((u(),d(V,{link:"",type:"primary",onClick:M=>{return U=e.id,void G({name:"TradeOrderDetail",params:{id:U}});var U}},{default:t(()=>[l(f,{icon:"ep:notification"}),b(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"])),[[L,["trade:order:query"]]]),C((u(),d(ee,{onCommand:M=>((U,H)=>{var K,j;switch(U){case"remark":(K=A.value)==null||K.open(H);break;case"delivery":(j=N.value)==null||j.open(H)}})(M,e)},{dropdown:t(()=>[l($,null,{default:t(()=>[e.deliveryType===a(g).EXPRESS.type&&e.status===a(Ke).UNDELIVERED.status?(u(),d(z,{key:0,command:"delivery"},{default:t(()=>[l(f,{icon:"ep:takeaway-box"}),b(" \u53D1\u8D27 ")]),_:1})):w("",!0),l(z,{command:"remark"},{default:t(()=>[l(f,{icon:"ep:chat-line-square"}),b(" \u5907\u6CE8 ")]),_:1})]),_:2},1024)]),default:t(()=>[l(V,{link:"",type:"primary"},{default:t(()=>[l(f,{icon:"ep:d-arrow-right"}),b(" \u66F4\u591A ")]),_:1})]),_:2},1032,["onCommand"])),[[L,["trade:order:update"]]])])]),_:1},8,["list","pick-up-store-list"])]),_:1},8,["data"])),[[te,a(E)]]),l(le,{limit:a(r).pageSize,"onUpdate:limit":o[11]||(o[11]=e=>a(r).pageSize=e),page:a(r).pageNo,"onUpdate:page":o[12]||(o[12]=e=>a(r).pageNo=e),total:a(S),onPagination:v},null,8,["limit","page","total"])]),_:1}),l(Se,{ref_key:"deliveryFormRef",ref:N,onSuccess:v},null,512),l(qe,{ref_key:"updateRemarkForm",ref:A,onSuccess:v},null,512)],64)}}})});export{ta as __tla,B as default};
